{
  "hash": "40238b985c83a375e86d1c950e85907b",
  "result": {
    "markdown": "---\ndate: 2022-10-25\nlesson: InfoVis2\nthema: Vertiefung ggplot\nindex: 2\n---\n\n\n# Infovis 2: Übung A\n\n\n::: {.cell}\n\n:::\n\n\nFür die heutige Übung brauchst du den Datensatz [temperature_2005.csv](https://moodle.zhaw.ch/mod/resource/view.php?id=602268). Dabei handelt es sich wieder um Teperaturwerte verschiedener Stationen, diesmal aus dem Jahr 2005. Das Datum ist so formatiert, dass `R` (isbesondere `read_csv`) es korrekt als `datetime` erkennen und als `POSIXct` einlesen sollte.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(tidyr)\nlibrary(ggplot2)\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 1\n\nMache aus der *wide table* eine *long table* die wie folgt aussieht. \n\n\n::: {.cell}\n::: {.cell-output-display}\n|time       |station | temperature|\n|:----------|:-------|-----------:|\n|2005-01-01 |ALT     |         1.3|\n|2005-01-01 |BUS     |         1.5|\n|2005-01-01 |GVE     |         1.1|\n|2005-01-01 |INT     |         0.2|\n|2005-01-01 |OTL     |         2.2|\n|2005-01-01 |LUG     |         1.7|\n:::\n:::\n\n\nLade anschliessend [temperature_2005_metadata.csv](https://moodle.zhaw.ch/mod/resource/view.php?id=602269) herunter und verbinde die beiden Datensätze mit einem `left_join` via `station` (bzw. `stn`). \n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 2\n\nErstelle ein Scatterplot (`time` vs. `temperature`) wobei die Punkte aufgrund ihrer Meereshöhe eingefärbt werden sollen. Tiefe Werte sollen dabei blau eingefärbt werden und hohe Werte rot (`scale_color_gradient`). Verkleinere die Punkte um übermässiges Überplotten der Punkten zu vermeiden (`size =`). Weiter sollen auf der x-Achse im Abstand von 3 Monaten der jeweilige Monat vermerkt sein (`date_breaks` bzw. `date_labels` von `scale_x_datetime()`).\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex2-1.png){#fig-ggplot-ex2 width=672}\n:::\n:::\n\n\n## Aufgabe 3\n\nErstelle eine Zusatzvariabel `Date` mit dem Datum der jeweiligen Messung ( mit `as.Date`). Nutze diese Spalte um die Tagesmitteltemperatur pro Station zu berechnen (mit `summarise()`). \n\nUm die Metadaten  (`Name`, `Meereshoehe`, `x`, `y`) nicht zu verlieren kannst du den Join aus der ersten Übung wieder ausführen. Alternativ (schneller aber auch schwerer zu verstehen) kannst du diese Variabeln innerhalb deines `group_by` verwenden.\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 4\n\nWiederhole nun den Plot aus der ersten Aufgabe mit den aggregierten Daten aus der vorherigen Aufgabe. Um die labels korrekt zu setzen musst du `scale_x_datetime` mit `scale_x_date` ersetzen. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex4-1.png){#fig-ggplot-ex4 width=672}\n:::\n:::\n\n\n## Aufgabe 5\n\nFüge am obigen Plot eine schwarze, gestrichelte Trendlinie hinzu.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex5-1.png){#fig-ggplot-ex5 width=672}\n:::\n:::\n\n\n## Aufgabe 6\n\nPositioniere die Legende oberhalb des Plots (nutze dazu `theme()` mit `legend.position`). \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex6-1.png){#fig-ggplot-ex6 width=672}\n:::\n:::\n\n\n## Aufgabe 7 (optional, fortgeschritten)\n\nFüge den Temperaturwerten auf der y-Ache ein `°C` hinzu (siehe unten und studiere [diesen Tipp](https://stackoverflow.com/a/35967126/4139249) zur Hilfe). \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex7-1.png){#fig-ggplot-ex7 width=672}\n:::\n:::\n\n\n## Aufgabe 8\n\nJetzt verlassen wir den Scatterplot und machen einen Boxplot mit den Temperaturdaten. Färbe die Boxplots wieder in Abhängigkeit der Meereshöhe ein. \n\n- Beachte den Unterschied zwischen `colour =` und `fill =`\n- Beachte den Unterschied zwischen `facet_wrap()` und `facet_grid()`\n- `facet_grid()` braucht übrigens noch einen Punkt (`.`) zur Tilde (`~`). \n- Beachte den Unterschied zwischen \"`.~`\" und \"`~.`\" bei `facet_grid()`\n- verschiebe nach Bedarf die Legende\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex8-1.png){#fig-ggplot-ex8 width=672}\n:::\n:::\n\n\n## Aufgabe 9\n\nAls letzter wichtiger Plottyp noch zwei Übungen zum Histogramm. Erstelle ein Histogramm `geom_histogram()` mit den Temperaturwerten. Teile dazu die  Stationen in verschiedene Höhenlagen ein (Tieflage [< 400 m], Mittellage [400 - 600 m] und Hochlage [> 600 m]). Vergleiche die Verteilung der Temperaturwerte in den verschiedenen Lagen mit einem Histogramm. \n\nTip: Nutze `cut` um die Stationen in die drei Gruppen aufzuteilen\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Generierter Plot](Infovis2_Uebung_A_files/figure-html/fig-ggplot-ex9-1.png){#fig-ggplot-ex9 width=672}\n:::\n:::\n\n\n## Musterlösung\n\n\n\n",
    "supporting": [
      "Infovis2_Uebung_A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}