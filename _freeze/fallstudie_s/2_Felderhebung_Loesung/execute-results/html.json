{
  "hash": "fa64a957b0ccc3c5fbfd9bc42e9663bd",
  "result": {
    "markdown": "\n# 2: Felderhebung Lösung\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n::: {.cell layout-align=\"left\"}\n\n:::\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n#.###############################################################################################\n# Besuchermonitoring Grüntal - Auswertung der Besucherzahlen ####\n# Modul Research Methods, HS20. Adrian Hochreutener ####\n#.################################################################################################\n#.##############################################################################################\n# METADATA UND DEFINITIONEN ####\n#.################################################################################################\n# Ordnerstruktur ####\n# Im Ordner in dem das R-Projekt abgelegt ist muessen folgende Unterordner bestehen:\n# - Skripts\n# - Felderhebungen (Rohdaten hier ablegen)\n# - Results\n# Benoetigte Bibliotheken ####\nlibrary(tidyverse) # Data wrangling und piping\nlibrary(lubridate) # Arbeiten mit Datumsformaten\nlibrary(data.table)# schnelles Dateneinlesen\n\n#.###############################################################################################\n# 1. DATENIMPORT #####\n#.###############################################################################################\n\n# 1.1 Einlesen ####\n# lese die Daten mithilfe von data.table ein. Je nach Bedarf muss der Speicherort sowie der\n# Dateiname angepasst werden\ncam <- fread(here(\"data\",\"DummyData.csv\"))\n```\n:::\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n#.###############################################################################################\n# 2. VORBEREITUNG DER DATEN #####\n#.###############################################################################################\n\n# 2.1 erstes Sichten und anpassen der Datentypen ####\nstr(cam)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'data.table' and 'data.frame':\t100 obs. of  11 variables:\n $ Person_Auswertung: chr  \"Bsp\" \"Bsp\" \"Bsp\" \"Bsp\" ...\n $ Kamerastandort   : chr  \"ost\" \"ost\" \"ost\" \"ost\" ...\n $ ID_Foto          : chr  \"bsp_001\" \"bsp_002\" \"bsp_003\" \"bsp_004\" ...\n $ Datum            : chr  \"08.10.2020\" \"07.10.2020\" \"06.10.2020\" \"09.10.2020\" ...\n $ Stunde           : int  3 0 16 24 17 23 14 7 5 23 ...\n $ Art              : chr  \"Mensch\" \"Wildtier\" \"Wildtier\" \"Wildtier\" ...\n $ Anzahl           : int  3 4 1 6 7 10 2 6 9 6 ...\n $ Richtung         : chr  \"Bergauf\" \"Bergauf\" \"Bergauf\" \"Bergab\" ...\n $ Aktivitaet       : chr  \"Spaziergaenger\" \"0\" \"0\" \"0\" ...\n $ Begleittier      : chr  \"Hund_ohne_Leine\" \"0\" \"0\" \"0\" ...\n $ Wildtier         : chr  \"0\" \"Hase\" \"Hase\" \"Hase\" ...\n - attr(*, \".internal.selfref\")=<externalptr> \n```\n:::\n\n```{.r .cell-code}\nhead(cam)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Person_Auswertung Kamerastandort ID_Foto      Datum Stunde      Art Anzahl\n1:               Bsp            ost bsp_001 08.10.2020      3   Mensch      3\n2:               Bsp            ost bsp_002 07.10.2020      0 Wildtier      4\n3:               Bsp            ost bsp_003 06.10.2020     16 Wildtier      1\n4:               Bsp            ost bsp_004 09.10.2020     24 Wildtier      6\n5:               Bsp            ost bsp_005 07.10.2020     17 Wildtier      7\n6:               Bsp            ost bsp_006 12.10.2020     23   Mensch     10\n   Richtung     Aktivitaet     Begleittier Wildtier\n1:  Bergauf Spaziergaenger Hund_ohne_Leine        0\n2:  Bergauf              0               0     Hase\n3:  Bergauf              0               0     Hase\n4:   Bergab              0               0     Hase\n5:  Bergauf              0               0    Fuchs\n6:  Bergauf   Unbestimmbar         Anderes        0\n```\n:::\n\n```{.r .cell-code}\ncam <- cam %>% \n  mutate(Datum = as.Date(Datum, format = \"%d.%m.%Y\"))%>%\n  mutate(Kamerastandort = factor(Kamerastandort))%>%\n  mutate(Art = factor(Art))%>%\n  mutate(Richtung = factor(Richtung))%>%\n  mutate(Aktivität = factor(Aktivitaet))%>%\n  mutate(Begleittier = factor(Begleittier))%>%\n  mutate(Wildtier = factor(Wildtier))\n\n# Datensatz trennen ####\n# Kamera ost und West sind noch in einem Datensatz.\n# Wir betrachten jeden Standort einzeln --> trennen aufgrund Name Standort\nost <- filter(cam, Kamerastandort == \"ost\")\nwest <- filter(cam, Kamerastandort == \"west\")\n\n# 2.3 Verteilung pruefen ####\n# mittels Histogram \n# bei explorativen Analysen macht es immer Sinn sich die Verteilung der Daten anzuschauen\nhist(ost$Anzahl[ost$Art==\"Mensch\" &# wir sind vorerst nur an den Menschen interessiert\n                  !ost$Anzahl==0], # hier schliesse ich die Nuller aus der Visualisierung aus\n     breaks = 10) \n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-5-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nhist(west$Anzahl[west$Art==\"Mensch\" &\n                  !west$Anzahl==0], \n     breaks = 10) \n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-5-2.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\n# 2.4 mittels Scatterplot ####\nplot(x=ost$Datum[ost$Art==\"Mensch\" &\n                   !ost$Anzahl==0], \n     y=ost$Anzahl[ost$Art==\"Mensch\" &\n                    !ost$Anzahl==0], \n     xlab = \"Datum\")\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-5-3.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nplot(x=west$Datum[west$Art==\"Mensch\" &\n                   !west$Anzahl==0], \n     y=west$Anzahl[west$Art==\"Mensch\" &\n                    !west$Anzahl==0], \n     xlab = \"Datum\")\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-5-4.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\n# Filter ####\n# fuer die weiteren Analysen schliessen wir die Wildtiere komplett aus\nost <- filter(ost, Art == \"Mensch\")\nwest <- filter(west, Art == \"Mensch\")\n\n# Dennoch wolle wir auch wissen, welche Tiere auf dem Areal unterwegs sind\n# Dafuer gibts einen separaten Datensatz\nTiere <- filter(cam, cam$Art == \"Wildtier\")\n```\n:::\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n#.##############################################################################################\n# 3. ANALYSE #####\n#.###############################################################################################\n\n# Fuer die Analyse Eigenschaften Datensatz anschauen\nsummary(ost)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Person_Auswertung  Kamerastandort   ID_Foto              Datum           \n Length:26          ost :26        Length:26          Min.   :2020-10-06  \n Class :character   west: 0        Class :character   1st Qu.:2020-10-07  \n Mode  :character                  Mode  :character   Median :2020-10-08  \n                                                      Mean   :2020-10-08  \n                                                      3rd Qu.:2020-10-10  \n                                                      Max.   :2020-10-12  \n     Stunde            Art         Anzahl               Richtung \n Min.   : 0.00   Mensch  :26   Min.   : 1.000   Bergab      : 7  \n 1st Qu.: 6.25   Wildtier: 0   1st Qu.: 3.000   Bergauf     :15  \n Median :14.00                 Median : 6.000   Unbestimmbar: 4  \n Mean   :13.04                 Mean   : 5.308                    \n 3rd Qu.:20.75                 3rd Qu.: 6.000                    \n Max.   :23.00                 Max.   :10.000                    \n  Aktivitaet                 Begleittier    Wildtier           Aktivität\n Length:26          0              :8    0      :26   0             :0  \n Class :character   Anderes        :6    Anderes: 0   Anderes       :8  \n Mode  :character   Hund_angeleint :9    Fuchs  : 0   Biker         :3  \n                    Hund_ohne_Leine:3    Hase   : 0   Landwirtschaft:3  \n                                         Reh    : 0   Spaziergaenger:7  \n                                                      Unbestimmbar  :5  \n```\n:::\n\n```{.r .cell-code}\nsummary(west)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Person_Auswertung  Kamerastandort   ID_Foto              Datum           \n Length:28          ost : 0        Length:28          Min.   :2020-10-06  \n Class :character   west:28        Class :character   1st Qu.:2020-10-07  \n Mode  :character                  Mode  :character   Median :2020-10-09  \n                                                      Mean   :2020-10-09  \n                                                      3rd Qu.:2020-10-11  \n                                                      Max.   :2020-10-12  \n     Stunde            Art         Anzahl              Richtung \n Min.   : 1.00   Mensch  :28   Min.   :0.000   Bergab      :11  \n 1st Qu.: 6.75   Wildtier: 0   1st Qu.:1.750   Bergauf     : 8  \n Median :11.00                 Median :3.500   Unbestimmbar: 9  \n Mean   :12.07                 Mean   :4.143                    \n 3rd Qu.:16.75                 3rd Qu.:7.250                    \n Max.   :24.00                 Max.   :9.000                    \n  Aktivitaet                 Begleittier    Wildtier           Aktivität\n Length:28          0              :5    0      :28   0             :0  \n Class :character   Anderes        :8    Anderes: 0   Anderes       :5  \n Mode  :character   Hund_angeleint :8    Fuchs  : 0   Biker         :8  \n                    Hund_ohne_Leine:7    Hase   : 0   Landwirtschaft:2  \n                                         Reh    : 0   Spaziergaenger:5  \n                                                      Unbestimmbar  :8  \n```\n:::\n\n```{.r .cell-code}\n# Anzahl Total / standort ####\nAnzahl_Ost <- sum(ost$Anzahl)\nAnzahl_West <- sum(west$Anzahl)\n\n# Meiste Aktivitaet ####\nAkt_ost <- ost %>%\n  group_by(Aktivität)%>%       # Hier sagen wir nach was wir gruppieren \n  summarise (n = sum(Anzahl)) %>%      # und dann sagen wir, dass R zusammenfassen soll und zwar die Anzahl\n  mutate(freq = n / sum(n))%>% # und dann soll und R das prozentuale Verhaeltniss berechnen\n  arrange(desc(n))             # und dann das ganze absteigend sortieren\n\n# das ganze wiederholen wir fuer den zweiten Standort\n# Jetzt kommt die grosse Staerke von R. \n# Wir haben den Code zur Berechnung der Anzahl pro Gruppe bereits geschrieben.\n# fuer die folgenden Auswertungen koennen wir ihn einfach \"recyceln\"\n Akt_west<- west %>%\n  group_by(Aktivität)%>%\n  summarise (n = sum(Anzahl)) %>%\n  mutate(freq = n / sum(n))%>%\n  arrange(desc(n))\n\nAktivitaet_West <- west %>%\n  group_by(Aktivität)%>%\n  summarise (n = sum(Anzahl)) %>%\n  mutate(freq = n / sum(n))%>%\n  arrange(desc(n))\n\n# Begleittier\nBegleit_ost <- ost %>%\n  group_by(Begleittier)%>%\n  summarise (n = sum(Anzahl)) %>%\n  mutate(freq = n / sum(n))%>%\n  arrange(desc(n))\n# uns interessiert es nicht, wie viele Leute kein Begleittier dabei hatten\nBegleit_ost <- filter(Begleit_ost, !Begleittier == \"0\")\n\nBegleit_west <- west %>%\n  group_by(Begleittier)%>%\n  summarise (n = sum(Anzahl)) %>%\n  mutate(freq = n / sum(n))%>%\n  arrange(desc(n))\n\nBegleit_west <- filter(Begleit_west, !Begleittier == \"0\")\n\n# Wildtier\nWildtier <- Tiere %>%\n  group_by(Wildtier)%>%\n  summarise (n = sum(Anzahl)) %>%\n  mutate(freq = n / sum(n))%>%\n  arrange(desc(n))\n```\n:::\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n#.###############################################################################################\n# 4. VISUALISIERUNG #####\n#.###############################################################################################\n\n# Verteilung der Aktivitaeten als Pie Chart ####\n# Zuerst eine Palette mit 5 Farben definieren\npal <- hcl.colors(5, palette = \"heat\")\n# Dann als Kreisdiagramm plotten\npie(Akt_west$n, labels = c(\"Anderes\", \"Biker\", \"Landwirtschaft\", \"Spaziergaenger\", \"unbestimmbar\"),\n    main = \"Prozentuales Verhaeltnis West\",\n    col = pal) \n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-7-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\n# Begleittier als Bar Chart ####\nggplot(Begleit_ost,                      # hier den Datensatz spezifizieren\n       mapping=aes(x=Begleittier, y = n))+ # Absolute Anzahl darstellen\n  geom_col(width=0.9,position = \"dodge\")+# hier sage ich, dass ich ein Balkendiagramm will\n  labs(x=\"Begleittier\", y= \"Anzahl\")+    # Achsenbeschriftung setzen\n  theme_classic(base_size = 15)+         # Und zu guter letzt: Stil definieren\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) # sowie Achsenbeschr.ausrichten\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-7-2.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\n# Wildtier als Bar Chart ####\nggplot(Wildtier, mapping=aes(x=Wildtier, y=freq*100))+ # kann auch prozentual dargestellt werden\n  geom_col(width=0.9,position = \"dodge\")+\n  labs(x=\"Begleittier\", y= \"Prozent [%]\")+\n  theme_classic(base_size = 15)+\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_Loesung_files/figure-html/unnamed-chunk-7-3.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\n# Bei Bedraf koennen die selben Plots fuer den zweiten Standort gemacht werden.\n```\n:::\n",
    "supporting": [
      "2_Felderhebung_Loesung_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}