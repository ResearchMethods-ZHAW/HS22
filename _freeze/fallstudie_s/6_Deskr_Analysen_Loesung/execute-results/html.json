{
  "hash": "127ba5e924f553b0b15955d17d2c35a9",
  "result": {
    "markdown": "# KW 43+44: Lösung Deskriptiv\n\n\n\n\n\n\n\n\n# Aufgabe 1: Verlauf der Besuchszahlen / m\n\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n#.################################################################################################\n# 3. DESKRIPTIVE ANALYSE UND VISUALISIERUNG #####\n#.################################################################################################\n\n# 3.1 Verlauf der Besuchszahlen / m ####\n# Monatliche Summen am Standort\n\n# wann beginnt die Datenreihe schon wieder?\nfirst(depo_m$Ym)\n# und wann ist die fertig?\nlast(depo_m$Ym)\n\n# Plotte\nggplot(depo_m, mapping = aes(Ym, Total, group = 1))+ # group = 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird\n  #zeichne Lockdown 1\n  geom_rect(mapping = aes(xmin = ym(\"2020-3\"), xmax = ym(\"2020-5\"),\n                          ymin = 0, ymax = max(Total+(Total/100*10))),\n            fill = \"lightskyblue\", alpha = 0.2, colour = NA)+\n  #zeichne Lockdown 2\n  geom_rect(mapping = aes(xmin = ym(\"2020-12\"), xmax = ym(\"2021-3\"), \n                          ymin = 0, ymax = max(Total+(Total/100*10))), \n            fill = \"lightskyblue\", alpha = 0.2, colour = NA)+\n  geom_line(alpha = 0.6, size = 1.5)+\n  labs(title= \"\", y=\"Fussgänger:innen pro Monat\", x = \"Jahr\")+\n  theme_linedraw(base_size = 15)+\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))\n```\n\n::: {.cell-output-display}\n![](6_Deskr_Analysen_Loesung_files/figure-html/unnamed-chunk-3-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"Entwicklung_Zaehlstelle.png\", width=20, height=10, units=\"cm\", dpi=1000, \n       path = \"fallstudie_s/results/\")  \n\n# mache einen prozentuellen areaplot\nggplot(depo_m_daytime, aes(Ym, Total, fill = Tageszeit)) + \n  geom_area(position = \"fill\")+\n  scale_fill_manual(values = mycolors)+\n  theme_classic(base_size = 15)+\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))+\n  labs(title= \"\", y=\"Verteilung Fussgänger:innen / Monat [%]\", x = \"Jahr\")\n```\n\n::: {.cell-output-display}\n![](6_Deskr_Analysen_Loesung_files/figure-html/unnamed-chunk-3-2.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"Proz_Entwicklung_Zaehlstelle.png\", width=20, height=10, units=\"cm\", dpi=1000, \n       path = \"fallstudie_s/results/\")  \n```\n:::\n\n\n\n# Aufgabe 2: Wochengang\n\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n# mean / d / phase\nmean_phase_wd <- depo_d |> \n  group_by(Wochentag, Phase) |> \n  summarise(Total = mean(Total))\n\nwrite.csv(mean_phase_wd, \"fallstudie_s/results/mean_phase_wd.csv\")\n\n#plot\nggplot(data = depo_d)+\n  geom_boxplot(mapping = aes(x= Wochentag, y = Total, fill = Phase))+\n  labs(title=\"\", y= \"Fussgänger:innen pro Tag\")+\n  scale_fill_manual(values = c(\"lightgray\", \"royalblue\", \"red4\", \"orangered\", \"gold2\"))+\n  theme_classic(base_size = 15)+\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1),\n        legend.title = element_blank())\n```\n\n::: {.cell-output-display}\n![](6_Deskr_Analysen_Loesung_files/figure-html/unnamed-chunk-4-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"Wochengang_Lockdown.png\", width=15, height=15, units=\"cm\", dpi=1000, \n       path = \"fallstudie_s/results/\")\n```\n:::\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n# Statistik: Unterschied WE und WO waehrend Lockdown 1\nt.test(depo_d$Total [depo_d$Phase == \"Lockdown_1\" & depo_d$Wochenende==\"Werktag\"], \n       depo_d$Total [depo_d$Phase == \"Lockdown_1\" & depo_d$Wochenende==\"Wochenende\"])\n```\n:::\n\n\n# Aufgabe 3: Tagesgang\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\n# Bei diesen Berechnungen wird jeweils der Mittelwert pro Stunde berechnet. \n# wiederum nutzen wir dafuer \"pipes\"\nMean_h <- depo |> \n  group_by(Wochentag, Stunde, Phase) |> \n  summarise(Total = mean(Total)) \n\n# Plotte den Tagesgang, unterteilt nach Wochentagen\n\nggplot(Mean_h, aes(x = Stunde, y = Total, colour = Wochentag, linetype = Wochentag))+\n  geom_line(size = 2)+\n  scale_colour_viridis_d()+\n  scale_linetype_manual(values = c(rep(\"solid\", 5),  \"twodash\", \"twodash\"))+\n  scale_x_continuous(breaks = c(seq(0, 23, by = 2)), labels = c(seq(0, 23, by = 2)))+\n  facet_grid(rows = vars(Phase))+\n  labs(x=\"Uhrzeit [h]\", y= \"∅ Fussganger_Innen / h\", title = \"\")+\n  lims(y = c(0,25))+\n  theme_linedraw(base_size = 15)\n```\n\n::: {.cell-output-display}\n![](6_Deskr_Analysen_Loesung_files/figure-html/unnamed-chunk-6-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"Tagesgang.png\", width=25, height=25, units=\"cm\", dpi=1000,\n       path = \"fallstudie_s/results/\")\n```\n:::\n\n\n# Aufgabe 4: Kennzahlen\n\n\n::: {.cell layout-align=\"left\"}\n\n```{.r .cell-code}\ntotal_phase <- depo_daytime |> \n  # gruppiere nach Phasen inkl. Normal. Diese Levels haben wir bereits definiert\n  group_by(Phase, Tageszeit) |> \n  summarise(Total = sum(Total),\n            IN = sum(Fuss_IN),\n            OUT = sum(Fuss_OUT))\n\nwrite.csv(total_phase, \"fallstudie_s/results/total_phase.csv\")\n\n# mean besser Vergleichbar, da Zeitreihen unterschiedlich lange\nmean_phase_d <- depo_daytime |> \n  group_by(Phase, Tageszeit) |> \n  summarise(Total = mean(Total),\n            IN = mean(Fuss_IN),\n            OUT = mean(Fuss_OUT))\n# berechne prozentuale Richtungsverteilung\nmean_phase_d <- mean_phase_d |> \n  mutate(Proz_IN = round(100/Total*IN, 1)) |> # berechnen und auf eine Nachkommastelle runden\n  mutate(Proz_OUT = round(100/Total*OUT,1))\n\nwrite.csv(mean_phase_d, \"fallstudie_s/results/mean_phase_d.csv\")\n\n# plotte die Verteilung der Fussgänger nach Tageszeit abhängig von der Phase\nggplot(mean_phase_d, mapping = aes(Phase, Total, fill=Tageszeit)) + \n  geom_col(position = \"fill\")+\n  scale_fill_manual(values = mycolors)+\n  theme_classic(base_size = 15)+\n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))+\n  labs(title= \"\", y=\"Verteilung Fussgänger:innen nach Tageszeit [%]\", x = \"Phase\")\n```\n\n::: {.cell-output-display}\n![](6_Deskr_Analysen_Loesung_files/figure-html/unnamed-chunk-7-1.png){fig-align='left' width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"Proz_Entwicklung_Zaehlstelle_Phase.png\", width=20, height=15, units=\"cm\", dpi=1000, \n       path = \"fallstudie_s/results/\")  \n```\n:::\n",
    "supporting": [
      "6_Deskr_Analysen_Loesung_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}