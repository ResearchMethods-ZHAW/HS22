{
  "hash": "bce2d911c587d98a5717f81ddd973442",
  "result": {
    "markdown": "# 2. Daten(vor)verarbeitung - Lösung\n\n\n\n\n\n## Projektaufbau RStudio-Projekte\n\nVor den eigentlichen Auswertungen müssen einige vorbereitende Arbeiten unternommen werden. Die Zeit, die man hier investiert, wird in der späteren Projektphase um ein vielfaches eingespart. Im Skript soll die Ordnerstruktur des Projekts genannt werden, damit der Arbeitsvorgang auf verschiedenen Rechnern reproduzierbar ist.\n\nArbeitet mit Projekten, da diese sehr einfach ausgetauscht und somit auch reproduziert werden önnen; es gibt keine absoluten Arbeitspfade sondern nur relative. Der Datenimport (und auch der Export) kann mithilfe dieser relativen Pfaden stark vereinfacht werden. Projekte helfen alles am richtigen Ort zu behalten. (mehr zur Arbeit mit Projekten: [Link](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects))\n\n## Aufbau von R-Skripten\n\nIm Kopf des Skripts zuerst immer den Titel des Projekts sowie die Autor:innen des Skripts nennen. Hier soll auch die Herkunft der Daten ersichtlich sein und falls externe Daten verwendet werden, sollte geklärt werden, wer die Datenherrschaft hat (Rehdaten: Forschungsgruppe WILMA).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| results: hide\n#.##################################################################################\n# Daten(vor)verarbeitung Fallstudie WPZ  ####\n# Modul Research Methods, HS21. Autor/in ####\n#.##################################################################################\n\n# Beschreibt zudem folgendes:\n# • Ordnerstruktur (ich verwende hier den Projektordner mit den Unterordnern Skripts, \n# Feldaufnahmen, Data, Results, Plots)\n# • Verwendete Daten\n\n# Ein Skript soll in R eigentlich immer nach dem selbem Schema aufgebaut sein. \n# Dieses Schema beinhaltet (nach dem bereits erwähnten Kopf des Skripts) 4 Kapitel: \n```\n:::\n\n\n1. Datenimport\n2. Datenvorverarbeitung\n3. Analyse\n4. Visualisierung\n\nBereitet euer Skript also nach dieser Struktur vor. Nutzt für den Text, welcher nicht Code ist, vor dem Text das Symbol #. Wenn ihr den Text als Titel definieren wollt, der die grobe Struktur des Skripts absteckt, baut in wie in folgendem Beispiel auf:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| results: hide\n#.###################################################################################\n# METADATA ####\n#.###################################################################################\n# Datenherkunft ####\n# ...\n\n#.###################################################################################\n# 1. DATENIMPORT ####\n#.###################################################################################\n```\n:::\n\n\n### Libraries laden\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Daten laden\nHerunterladen der Daten der Feldaufnahme von Moodle, Einlesen, Sichtung der Datensätze und der Datentypen.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_team1 <- read_delim(\"fallstudie_n/data/Felderhebungen_Waldstruktur.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Felderhebungen_Waldstruktur.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\ndf_team2 <- read_delim(\"fallstudie_n/data/Felderhebung_11102022_gr3.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Felderhebung_11102022_gr3.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\ndf_team3 <- read_delim(\"fallstudie_n/data/Felderhebung_Waldstruktur_TEAM3_pink_Gruppe 7.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Felderhebung_Waldstruktur_TEAM3_pink_Gruppe 7.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\ndf_team4 <- read_delim(\"fallstudie_n/data/Felderhebungen_Team4_Blau_221011.csv\",delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Felderhebungen_Team4_Blau_221011.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\ndf_team5 <- read_delim(\"fallstudie_n/data/Felderhebung TEAM 5.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Felderhebung TEAM 5.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\ndf_team6 <- read_delim(\"fallstudie_n/data/Team6_Felderhebung.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Team6_Felderhebung.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\n# hier können die Probekreise mit den Angaben zur Anzahl Rehlokalisationen und der \n# LIDAR-basierten Ableitung der Waldstruktur eingelesen werden\n\ndf_reh <- read_delim(\"fallstudie_n/data/Aufgabe3_Reh_Waldstruktur_221013.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError: 'fallstudie_n/data/Aufgabe3_Reh_Waldstruktur_221013.csv' does not exist in current working directory ('/workspaces/2022_HS').\n```\n:::\n\n```{.r .cell-code}\nstr(df_reh)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in str(df_reh): object 'df_reh' not found\n```\n:::\n\n```{.r .cell-code}\n# Die eingelesenen Datensätze anschauen und versuchen zu einem Gesamtdatensatz  \n# verbinden. Ist der Output zufriedenstellend?\n\ndf_gesamt <- bind_rows(df_team1, df_team2, df_team3, df_team4, df_team5, df_team6)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in list2(...): object 'df_team1' not found\n```\n:::\n\n```{.r .cell-code}\nstr(df_gesamt)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in str(df_gesamt): object 'df_gesamt' not found\n```\n:::\n:::\n\n\n## Aufgabe 1\n\n1.1 Einügen zusätzliche Spalte pro Datensatz mit der Gruppenzugehörigkeit (Team1-6).\n1.2 Spaltenumbenennung damit die Bezeichungen in allen Datensätzen gleich sind und der Gesamtdatensatz zusammengefügt werden kann.\n--> Befehle mutate und rename, mit pipes (%>%) in einem Schritt möglich.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#.#################################################################################\n# 2. DATENVORVERARBEITUNG #####\n#.#################################################################################\n\ndf_team1 <- df_team1 %>%\n  mutate(team = \"team1\") %>%\n  rename(KreisID = \"Kreis (r 12.5m)\",\n         DG_Rubus = \"Deckungsgrad Rubus sp. [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team1\"): object 'df_team1' not found\n```\n:::\n\n```{.r .cell-code}\ndf_team2 <- df_team2 %>%\n  mutate(team = \"team2\") %>%\n  rename(KreisID = \"Kreis\",\n         DG_Rubus = \"Deckungsgrad Rubus sp. [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team2\"): object 'df_team2' not found\n```\n:::\n\n```{.r .cell-code}\ndf_team3 <- df_team3 %>%\n  mutate(team = \"team3\") %>%\n  rename(KreisID = \"Kreis (r 12.5m)\",\n         X = \"x\",\n         Y = \"y\",\n         DG_Rubus = \"Deckungsgrad Rubus sp. [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team3\"): object 'df_team3' not found\n```\n:::\n\n```{.r .cell-code}\ndf_team4 <- df_team4 %>%\n  mutate(team = \"team4\") %>%\n  rename(KreisID = \"Kreis (r 12.5m)\",\n         DG_Rubus = \"Deckungsgrad Rubus sp. [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team4\"): object 'df_team4' not found\n```\n:::\n\n```{.r .cell-code}\ndf_team5 <- df_team5 %>%\n  mutate(team = \"team5\") %>%\n  rename(KreisID = \"Kreis\",\n         X = \"x\",\n         Y = \"y\",\n         DG_Rubus = \"Deckungsgrad Rubus sp [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team5\"): object 'df_team5' not found\n```\n:::\n\n```{.r .cell-code}\ndf_team6 <- df_team6 %>%\n  mutate(team = \"team6\") %>%\n  rename(KreisID = \"Kreis\",\n         X = \"x\",\n         Y = \"y\",\n         DG_Rubus = \"DG Rubus sp. [%]\",\n         DG_Strauchschicht = \"DG Strauchschicht [%] (0.5-3m)\",\n         DG_Baumschicht = \"DG Baumschicht [%] (ab 3m)\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., team = \"team6\"): object 'df_team6' not found\n```\n:::\n:::\n\n\n## Aufgabe 2\n\nZusammenführen der Teildatensätze zu einem Datensatz\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_gesamt <- bind_rows(df_team1, df_team2, df_team3, df_team4, df_team5, df_team6)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in list2(...): object 'df_team1' not found\n```\n:::\n:::\n\n\n## Aufgabe 3\n\nVerbinden (join) des Datensatzes der Felderhebungen mit dem Datensatz der Rehe. \n\n**Ziel: ein Datensatz mit allen Kreisen der Felderhebung, angereichert mit den Umweltvariablen Understory und Overstory aus den LIDAR-Daten (DG_us, DG_os) aus dem Rehdatensatz.**\n--> Welche Art von join? Welche Spalten zum Verbinden (by = ?) der Datensätze\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_with_LIDAR <- left_join(df_gesamt,df_reh, by = c(\"X\" = \"x\", \"Y\" = \"y\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in left_join(df_gesamt, df_reh, by = c(X = \"x\", Y = \"y\")): object 'df_gesamt' not found\n```\n:::\n:::\n\n\n### Aufgabe 4\n\nScatterplot der korrespondondierenden Umweltvariablen aus den Felderhebungen gegen die Umweltvariablen aus den LIDAR-Daten erstellen (zusätzlich Einfärben der Gruppen und Regressionslinie darüberlegen). \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#.#####################################################################################\n# 4. VISUALISERUNG #####\n#.#####################################################################################\n\nggplot(df_with_LIDAR, aes(DG_Strauchschicht, DG_us, color = team)) + geom_point() + \n  stat_smooth(method = \"lm\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in ggplot(df_with_LIDAR, aes(DG_Strauchschicht, DG_us, color = team)): object 'df_with_LIDAR' not found\n```\n:::\n\n```{.r .cell-code}\nwrite_delim(df_with_LIDAR, \"data/df_with_lidar.csv\", delim = \";\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in is.data.frame(x): object 'df_with_LIDAR' not found\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}