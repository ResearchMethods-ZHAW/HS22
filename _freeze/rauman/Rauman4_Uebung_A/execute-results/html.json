{
  "hash": "fb16f3d9a7c45d8dc60e182aa3627974",
  "result": {
    "markdown": "---\ndate: 2022-12-06\nlesson: RaumAn4\nthema: Vector Data\nindex: 1\nexecute: \n  echo: false\n---\n\n\n# Rauman 4: Übung A\n\nIn @sec-spatial-join-points haben einen Spatial Join zwischen Bäumen und Wiesen durchgeführt um herauszufinden, ob sich der Baum in einer Wiese befindet oder nicht. Heute gehen wir einen Schritt weiter und wollen folgende Frage beantworten: \n\n> Wie viel Wiese befinden sich in einem Umkreis von 20m um jeden Baum?\n\nLade dazu die benötigten Libraries und Datensätze in deine Session:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(sf)\nlibrary(ggplot2)\n\n\nwiesen <- read_sf(\"datasets/rauman/gruental.gpkg\", \"wiesen\")\nbaeume <- read_sf(\"datasets/rauman/gruental.gpkg\", \"baeume\")\n```\n:::\n\n\n## Aufgabe 1\n\nAls erster Schritt müssen wir jeden Baum mit einem 20m Puffer verstehen. Nutze dazu `st_buffer` um speichere den Output als `baeume_20m`. Schau dir `baeume_20m` nun genau an. Um welchen Geometrietyp handelt es sich dabei nun?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Rauman4_Uebung_A_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n## Aufgabe 2\n\nBerechnen nun die Schnittmenge aus `baeume_20m` und `wiesen` mit der Funktion `st_intersection` und speichere den Output als `baeume_wiesen`. Exploriere nun `baeume_wiesen`, auch mit `ggplot()`. Was ist passiert? Überprüfe die Anzahl Zeilen pro Datensatz. Haben die sich verändert? Wenn ja, warum?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Rauman4_Uebung_A_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n## Aufgabe 3\n\nBerechnen nun die Flächengrösse pro Geometrie mit der Funktion `st_area()`. Speichere den Output in einer neuen Spalte von `baeume_wiesen` (z.B. mit dem Namen `wiesen_flaeche`). Tipp: Konvertiere den Output aus `st_area` einen nummerischen Vektor mit `as.numeric()`.\n\n\n::: {.cell}\n\n:::\n\n\n\n## Aufgabe 4\n\nBerechne nun aus `wiesen_flaeche` den `wiesen_anteil`. Tipp: 100% ist die Kreisfläche aus $r^2\\times \\pi$, wobei in unserem Fall $r = 20$ entspricht.\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 5\n\n\nUm die berechneten Werte in den Datensatz `baeume` zu überführen braucht es noch folgende Schritte:\n\n1. Konvertiere `baeume_wiesen` in eine `data.frame` mit `st_drop_geometry` und speichere diese als `baeume_wiesen_df`\n2. Nutze die Spalte `baum_id` in `baeume_wiesen_df` um den berechneten `wiesen_anteil` in den Datenatz `baeume` zu überführen. Tipp: Nutze dafür einen `left_join`\n3. Ersetze alle `NA` Werte in der Spalte `wiesen_anteil` mit 0.\n\n\n::: {.cell}\n\n:::\n\n\n::: {.column-body}\n\n::: {.cell}\n::: {.cell-output-display}\n![Nach dieser Übung kannst du das Resultat optional in dieser Weise visualisieren.](Rauman4_Uebung_A_files/figure-html/fig-ggplot-ex4-1.png){#fig-ggplot-ex4 width=672}\n:::\n:::\n\n:::\n",
    "supporting": [
      "Rauman4_Uebung_A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}