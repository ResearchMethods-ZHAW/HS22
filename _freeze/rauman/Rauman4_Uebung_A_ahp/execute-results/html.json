{
  "hash": "696502bf09bc7ad6941fcd749393dc7b",
  "result": {
    "markdown": "---\ndate: 2022-12-06\nlesson: RaumAn4\nthema: Analytical Hierarchy Process (AHP)\nindex: 1\n---\n\n\n# Rauman 4: Übung A\n\n\n\n\n\nNachdem Sie nun die Theorie kennengelernt haben, werden Sie ein konkretes Beispiel für einen Analytischen Hierarchieprozess (AHP) durchführen. Dies ist ein manueller Ansatz, um Ihnen die Grundlagen eines AHP zu zeigen. Wenn Sie einen komplexeren AHP erstellen möchten, können Sie spezielle R AHP-Pakete verwenden, wie zum Beispiel [ahpsurvey package](https://cran.r-project.org/web/packages/ahpsurvey/vignettes/my-vignette.html).\n\n## Übung 1: Definieren Sie die Ausgangssituation \n\nDenken Sie zunächst an eine *aktuelle Entscheidung*, vor der Sie gerade stehen oder gestanden haben (z. B. Fahrradkauf oder Wohnungsmiete), und definieren Sie die folgenden Punkte.\n\n* Ein Ziel für Ihren AHP (z.B. Wohnungsmiete)\n* 4 Kriterien, auf die Sie Ihre Entscheidung stützen wollen (z. B. *Preis*, *Entfernung zur Arbeit/Schule*, *Grösse*, *Schönheit der Landschaft*)\n* 3 verschiedene Optionen/Alternativen (z. B. 3 verschiedene Wohnungen)\n\n\n::: {.cell}\n\n:::\n\n\n## Übung 2: Paarweiser Vergleich 1 & 2\n\nn einem ersten Schritt muss jedes Kriterium paarweise mit einem anderen Kriterium verglichen werden. Verwenden Sie die folgende Skala zur Gewichtung der Kriterien (siehe @tbl-ahprating). \n\n\n::: {#tbl-ahprating .cell tbl-cap='AHP Skala Gewichtungen'}\n::: {.cell-output-display}\nTable: Skala zur Gewichtung der Kriterien.\n\n|Wert       |Definition                                         |\n|:----------|:--------------------------------------------------|\n|1          |Die beiden Merkmale sind gleich wichtig            |\n|3          |Kriterium A ist etwas wichtiger als Kriterium B    |\n|5          |Kriterium A ist mässig wichtiger als Kriterium B   |\n|7          |Kriterium A ist deutlich wichtiger als Kriterium B |\n|9          |Kriterium A ist absolut wichtiger als Kriterium B  |\n|2, 4, 6, 8 |Zwischenwerte                                      |\n:::\n:::\n\n\nSie können den folgenden Code verwenden, um Ihre Gewichtungsmatrix zu erstellen. In der Matrix werden zwei Kriterien immer zweimal verglichen, und diese beiden Vergleiche sollten den Kehrwert des jeweils anderen darstellen. Zur Veranschaulichung haben wir einen Vergleich hinzugefügt, der wie folgt lautet: \n\n- Zeile 1, Spalte 2: *Kriterium 1* ist etwas wichtiger als *Kriterium 2*\n- Zeile 2, Spalte 1: *Kriterium 2* ist etwas weniger wichtig als *Kriterium 1*\n\nErstellen Sie diesen Matrixvergleich, der Ihren Kriterien entspricht, und ersetzen Sie die \"0\"-Werte durch Ihre Gewichte gemäss der @tbl-ahprating. Beachten Sie, dass alle Diagonalwerte gleich \"1\" sein sollten\n\n\n::: {.cell}\n\n```{.r .cell-code}\npairwise_comparison <- c(\n  1,   3, 0, 0,\n  1/3, 1, 0, 0,\n  0,   0, 1, 0,\n  0,   0, 0, 1\n) |> matrix(ncol = 4, byrow = TRUE) \n```\n:::\n\n::: {.cell}\n\n:::\n\n\n**Tipp**: Fügen Sie Spalten- und Zeilennamen hinzu, damit Ihre Matrix besser lesbar ist. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ncriterias <- c(\"price\", \"distance\", \"size\", \"beauty\")\n\nrownames(pairwise_comparison) <- criterias\ncolnames(pairwise_comparison) <- criterias\n```\n:::\n\n\n## Übung 3: Berechnung der Kriteriengewichte \n\n### Übung 3.1: Normalisierung der Matrix (Berechnung der Kritiriengewichte 1)\n\nIm nächsten Schritt muss die Matrix normalisiert werden (siehe @fig-criteria-normalize). Dies kann in den folgenden zwei Schritten erfolgen: \n\n1. Berechnen Sie die Summe jeder Spalte mit `colSums`. Speichern Sie die Ausgabe in einer Variablen (z.B. `ahp_colsums`).\n2. Teilen Sie jeden Wert in der Matrix durch die entsprechende Spaltensumme. Um dies zu erreichen, können Sie die Funktion `sweep()` auf die Matrix anwenden, die der Funktion `apply` sehr ähnlich ist (verwenden Sie `MARGIN = 2` (Spalten), `STATS = ahp_colsums` und `FUN = \"/\"`).\n\n\n\n::: {.cell}\n\n:::\n\n\n![Normalisierung der Kriterien](images/criteria_normalize.png){#fig-criteria-normalize}\n\n### Übung 3.2: Gewichtung der Kriterien (Berechnung der Kritiriengewichte 2)\n\nDies ist der letzte Schritt zur Berechnung der Gewichtung der einzelnen Kriterien (siehe @fig-weights-normalize). Dies geschieht wie folgt:\n\n1. Berechne die Summe jeder Zeile und speichere das Ergebnis in einer Variablen (z.B. `criteria_sum`). \n2. Dividiere die Summe der Kriterien durch die Summe der Kriterien und speichere das Ergebnis in einer Variablen (z.B. `criteria_weight`).\n\nHinweis: Die Summe von `criteria_weight` sollte 1 sein.\n\n\n\n\n\n![Gewichtung der Kriterien](images/weights_normalize.png){#fig-weights-normalize}\n\n## Übung 4: Konsistenzanalyse (Konsistenzanalyse 1 & 2)\n\nNachdem der paarweise Vergleich durchgeführt wurde, muss eine Konsistenzanalyse durchgeführt werden, um zu prüfen, ob die paarweisen Vergleiche konsistent sind oder dieser Widersprüche enthalten. Eine gewisse Inkonsistenz ist im Rahmen eines AHP zulässig, sie sollte aber nicht zu gross sein.\n\nUm die Konsistenz zu berechnen, sollten Sie wie in Folie 30 (Konsistenzanalyse 1) und den folgenden Schritten vorgehen:\n\n1. Führen Sie eine Matrixmultiplikation (`%*%`) zwischen `pairwise_comparison` und `criteria_weight` durch. \n\n\n::: {.cell}\n\n:::\n\n\n2. Dividiere das Ergebnis von 1) durch `criteria_weight`\n\n\n::: {.cell}\n\n:::\n\n\n3. Berechnen Sie $\\lambda_{max}$, indem Sie die Summe des in 2) erhaltenen Ergebnisses durch die Anzahl der Kriterien dividieren\n\n\n::: {.cell}\n\n:::\n\n\n4. Berechnung von $CI$ ($CI = \\frac{\\lambda_{max} - n}{n-1}$), wobei \"n\" der Anzahl der Kriterien entspricht\n\n\n::: {.cell}\n\n:::\n\n\n5. Ermitteln Sie $RI$ durch Nachschlagen in der @fig-ahp-random-index-by-saaty\n\n\n::: {.cell}\n\n:::\n\n\n5. Berechnen Sie $CR$ ($CR = CI / RI$)\n\n\n::: {.cell}\n\n:::\n\n\n6. Wenn CR > 0,1 ist, müssen Sie Ihre paarweisen Vergleiche neu bewerten. \n\n\n\n\n\n![AHP Random Index by Saaty](images/ahp_random_index_by_saaty.png){#fig-ahp-random-index-by-saaty}\n\n## Gratuliere!\n\nSie haben nun die Gewichte bestimmt, auf denen Sie Ihre Entscheidung aufbauen können, und haben festgestellt, ob diese Gewichte konsistent sind oder nicht. Diese nächsten Schritte sind technisch gesehen sehr ähnlich zu dem, was Sie in der obigen Übung getan haben, daher überlassen wir es Ihnen, ob Sie diese Schritte ausführen wollen oder nicht. Der Vollständigkeit halber sei gesagt, dass der nächsten Schritte folgende wären:\n\n1. Vergleichen Sie Ihre Optionen/Alternativen in einem paarweisen Vergleich miteinander (ähnlich wie Sie die Kriterien miteinander verglichen haben). Dies tun Sie für *jedes* Kriterium\n2. Normalisieren Sie die paarweisen Vergleiche Ihrer Optionen (ähnlich wie Sie die paarweisen Vergleiche der Kriterien normalisiert haben)\n3. Verwenden Sie die Gewichte, die Sie in der obigen Übung ermittelt haben, um Ihre Ergebnisse aus 2) zu gewichten\n4. Bestimmen Sie die beste Entscheidung auf der Grundlage des Ergebnisses aus 3)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}