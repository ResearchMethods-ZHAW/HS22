{
  "hash": "7d7fd753affaaf195cd9a7a306f5248a",
  "result": {
    "markdown": "---\ndate: 2022-12-12\nlesson: RaumAn5\nthema: Multi-Criteria Evaluation (MCE)\nindex: 1\nexecute: \n  echo: false\n---\n\n\n# Rauman 5: Übung B\n\nIn der letzten Übung (Übung A) haben wir die potentielle Standorte für Windkraftanalgen hinsichtlich vierer Distanzkriterien bewertet. In dieser Übung (Übung B) schliessen wir die Multikriterien-Evaluation ab, in dem wir:\n\n1. Folgende Kriterien mitberücksichtigen: Windgeschwindigkeit, Vereisungshäufigkeit und Hangneigung\n2. Die *Ausschlusskriterien* vom Resultat ausschliessen\n\nFür Punkt 1 müssen wir zusätzliche Daten einlesen, die im Rasterformat daherkommen. Punkt 2 beruht im Wesentlichen auf Daten, die wir bereits verwendet haben.\n\n\n::: {.cell}\n\n:::\n\n\n<!--\n3. Je höher die Windgeschwindigkeit ist\n4. Je geringer die Vereisungshäufigkeit ist\n5. Je geringer die Hangneigung ist\n\n\n-->\n\n## Übung 1: Rasterdaten einlesen\n\nZur Bewertung der Standorte Hinsichtlich Windgeschwindigkeit und Vereisungshäufigkeit stehen uns folgende Rasterdatensätze zur Verfügung. Lade die beiden nachfolgenden Datensätze herunter und mit der Funktion `rast()` in R ein.\n\n- [eis250m.tif](https://moodle.zhaw.ch/mod/resource/view.php?id=602288) (Vereisungshäufigkeit in Tage/Jahr)\n- [wind250m.tif](https://moodle.zhaw.ch/mod/resource/view.php?id=602297) (Durchschnittliche Windgeschwindigkeit)\n\nExplorieren Sie die Daten visuell und versuchen Sie ein Verständnis für die Datensätze zu bekommen. \n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## Übung 2: Wind und Eis bewerten\n\nDiese Rasterdaten müssen wir nicht weiter verarbeiten, ausser sie zu bewerten. Führen Sie diese Bewertung aufgrund nachstehender Tabelle durch. Nutzen Sie dafür die Funktion `classify()` analog @sec-classify1. \n\n<div class=\"mce-table\">\n\n\n::: {#tbl-bewerungstabelle-other .cell tbl-cap='Bewertungstabelle die Windgeschwindigkeit (m/s), Vereisungshäufigkeit (Tage/Jahr) und Hangneigung (Grad)'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n<tr>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Windgeschwindigkeit</div></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Vereisungshaeufigkeit</div></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Hangneigung</div></th>\n</tr>\n  <tr>\n   <th style=\"text-align:left;\"> Speed </th>\n   <th style=\"text-align:right;\"> Score </th>\n   <th style=\"text-align:left;\"> Days </th>\n   <th style=\"text-align:right;\"> Score </th>\n   <th style=\"text-align:left;\"> Slope </th>\n   <th style=\"text-align:right;\"> Score </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 0-35 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> 60-365 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> 20-90 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 35-40 </td>\n   <td style=\"text-align:right;\"> 0.1 </td>\n   <td style=\"text-align:left;\"> 54-60 </td>\n   <td style=\"text-align:right;\"> 0.1 </td>\n   <td style=\"text-align:left;\"> 18-20 </td>\n   <td style=\"text-align:right;\"> 0.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 40-45 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> 48-54 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> 16-18 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 45-50 </td>\n   <td style=\"text-align:right;\"> 0.3 </td>\n   <td style=\"text-align:left;\"> 42-48 </td>\n   <td style=\"text-align:right;\"> 0.3 </td>\n   <td style=\"text-align:left;\"> 14-16 </td>\n   <td style=\"text-align:right;\"> 0.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 50-55 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:left;\"> 36-42 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:left;\"> 12-14 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 55-60 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:left;\"> 30-36 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:left;\"> 10-12 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 60-65 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:left;\"> 24-30 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:left;\"> 8-10 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 65-70 </td>\n   <td style=\"text-align:right;\"> 0.7 </td>\n   <td style=\"text-align:left;\"> 18-24 </td>\n   <td style=\"text-align:right;\"> 0.7 </td>\n   <td style=\"text-align:left;\"> 6-8 </td>\n   <td style=\"text-align:right;\"> 0.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 70-75 </td>\n   <td style=\"text-align:right;\"> 0.8 </td>\n   <td style=\"text-align:left;\"> 12-18 </td>\n   <td style=\"text-align:right;\"> 0.8 </td>\n   <td style=\"text-align:left;\"> 4-6 </td>\n   <td style=\"text-align:right;\"> 0.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 75-80 </td>\n   <td style=\"text-align:right;\"> 0.9 </td>\n   <td style=\"text-align:left;\"> 6-12 </td>\n   <td style=\"text-align:right;\"> 0.9 </td>\n   <td style=\"text-align:left;\"> 2-4 </td>\n   <td style=\"text-align:right;\"> 0.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 80-Inf </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:left;\"> 0-6 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:left;\"> 0-250 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n</div>\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## Übung 3: Slope berechnen und Bewerten\n\nFür die Berechnung und anschilessende Bewertung der Hangneigung brauchen wir ein Höhenmodell. Lade das Höhenmodell, was wir bereits in @sec-raster-intro verwendet haben ([dhm250m.tif](https://moodle.zhaw.ch/mod/resource/view.php?id=694260)) in R ein, und berechne Anschliessend die Hangneigung mit der Funktion `terrain()` analog @sec-raster-slope (beachten Sie die Einheit des Output!). \n\nBewerten Sie die Hangneigung danach gemäss Tabelle @tbl-bewerungstabelle-other. \n\n\n::: {.cell}\n\n:::\n\n\n\n## Übung 4: Raster Overlay {#sec-raster-overlay2}\n\nAnalog @sec-raster-overlay1 können wir an dieser Stelle eine vorläufige Beurteilung der Gebiete durchführen. Hier stossen wir aber auf ein Problem. Sobald wir versuchen, Bewertungen aus Übung A mit bewertungen aus dieser Übung (Übung B) miteinander zu verrechnen, erhalten wir folgende Fehlermeldung:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-error}\n```\nError: [+] SRS do not match\n```\n:::\n:::\n\n\n`SRS do not match` soll heissen, dass die Koordinatenbezugssysteme (CRS) der verschiedenen Raster nicht überein stimmen. Wenn wir die CRS der verschiedenen Datensätze aber anschauen, sehen wir, dass es sich eigentlich um die gleichen CRS handelt.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(strassen_classify, describe = TRUE) # Datensatz aus Übung A\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           name authority  code                                   area\n1 CH1903 / LV03      EPSG 21781 Europe - Liechtenstein and Switzerland\n                     extent\n1 5.96, 10.49, 47.81, 45.82\n```\n:::\n\n```{.r .cell-code}\ncrs(wind_classify, describe = TRUE)     # Datensatz aus Übung B\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           name authority code area         extent\n1 CH1903 / LV03      <NA> <NA> <NA> NA, NA, NA, NA\n```\n:::\n:::\n\n\nDas Problem ist, dass diese in den beiden Datensätzen leicht anders abgespeichert sind. Wir können das Problem lösen, indem wir den CRS aus dem einen Raster mit dem CRS des anderen Rasters wie folgt überschreiben:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncrs(wind_classify) <- crs(strassen_classify)\ncrs(eis_classify) <- crs(strassen_classify)\ncrs(neigung_classify) <- crs(strassen_classify)\n```\n:::\n\n\nNun sollte der Overlay problemlos funktionieren. Führe einen Overlay mit allen verfügbaren Parameter (Bewertung der Distanz zu Strassen, Siedlung, Wald und Schutzgebiete sowie Wind, Eis und Neigung) durch und visualisiere das Resultat.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Ungewichtetes Überlagern aller Kriterien mit Ausnahme der Ausschlussgebiete](Rauman5_Uebung_B_files/figure-html/fig-overlay3-1.png){#fig-overlay3 width=672}\n:::\n:::\n\n\n\n\n## Übung 5: Ausschlusskriterien \n\nAls Auschlussgebiete gelten Flächen, wo keine Windkraftanlagen gebaut werden können. Dazu gehören bewohnte Flächen, nationale Schutzgebiete, Waldgebiete und Seen. Zwar werden bewohnte Flächen, nationale Schutzgebiete und Waldgebiete in unserer Analyse bereits schlecht (mit \"0\") bewertet, aber nicht kategorisch vom Resultat ausgeschlossen. Sprich: Wenn ein Gebiet, welches zum Beispiel mitten im Siedlungsgebiet liegt, alle anderen Bedigungen erfüllt, kann es trotzdem eine hohe Bewertung erhalten, obwohl dort keine Windkraftanalage gebaut werden kann.\n\nUm diese Gebiete kategorisch vom Resultat auszuschliessen können wir für die Siedlungsgebiete, Schutzgebiete sowie den Wald die rasterisierte Form verwenden, die wir in @sec-raster-distance erstellt haben (für die Seen müssen wir den entsprechenden Raster zuerst noch erstellen).\n\nDiese Rasterdatensätze sind bereits binär: Rasterzellen mit dem Wert 1 sind Zellen im Wald, im Schutzgebiet usw. Zellen ausserhalb sind `NA`. Um die Vereinigungsmenge zu erhalten (also alle Zellen , die entweder Sieldungsgebiet *oder* Wald *oder* Schutzgebiet *oder* Seen sind), können wir die Funktion `sum()` mit der Option `na.rm = TRUE` verwenden. \n\n:::{.callout-note}\nIn R ist `TRUE` das Äquivalent von `1` und `FALSE` das Äquivalent von `0`.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fehlendes Ausschlussgebiet Rasterisieren\nseen_raster <- rasterize(seen, template)\n\n# Summe aller Auschlussgebiete rechnen\n# (na.rm = TRUE ignoriert NA Werte bei Summenbildung)\nausschlussgebiete_sum <- sum(siedlungsgebiet_raster, schutzgebiete_raster, wald_raster, seen_raster, na.rm = TRUE)\nplot(ausschlussgebiete_sum)\n```\n\n::: {.cell-output-display}\n![Die Summe aller Ausschlussgebiete](Rauman5_Uebung_B_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nNun können wir alle Gebiete mit Werten > 0 gelten als Ausschlussgebiete bewerten.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nausschlussgebiete <- ausschlussgebiete_sum>0\nplot(ausschlussgebiete)\n```\n\n::: {.cell-output-display}\n![Binäre Darstellung der Ausschlussgebiete (TRUE und NA)](Rauman5_Uebung_B_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\nDer Aufmerksame Beobachter wird merken, dass hier nur `TRUE` Werte dargestellt, es Fehlen `FALSE` Werte. Tatsächlich hat `na.rm = TRUE` beim Summieren nur bewirkt, das `NA` Zellen ignoriert werden. Zellen, die die in *allen* Ausschlussgebieten keinen Wert aufweisen (`NA`), sind in `ausschlussgebiete` auch `NA`. Um diese Zellen mit `0` zu ersetzen gehen wir wie folgt vor:\n# Diese müssen mit 0 ersetzt werden\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Rauman5_Uebung_B_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n:::{.callout-note}\n## Für Profis\n\nNutze statt `sum()` die Funktion `any()`, um direkt auf eine binäre Bewertung der Ausschlussgebiete zu kommen.\n:::\n\n\n\n\n## Übung 5: Ausschlussgebiete von potenziellen Gebieten entfernen\n\nDas Resultat aus unserer vorläufigen Analyse (@fig-overlay3) weisst werte von 0 - 1 auf. Um sicher zu stellen, dass die Auschlussgebiete mit `0` ausgewiesen werden können wie folgt vorgehen: \n\nWir erstellen einen neuen Raster `einschlussgebiete`, welches das Gegenteil von `ausschlussgebiete` darstellt. Einzuschliessende Gebiete weisen den Wert `1`, auszuschliessende Gebiete den Wert `0` auf. Diesen Raster multiplizieren wir mit dem Resultat aus @fig-overlay3. Da jeder Wert, der mit `0` multipliziert `0` ergibt, werden so auszuschliessende Gebiete mit `0` bewertet. Einzuschliessende Gebiete behalten ihren Wert, da sie lediglich mit `1` multipliziert werden.\n\nFühre diese beiden Schriitte durch und visualisiere anschliessend das Ergebnis.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Rauman5_Uebung_B_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Rauman5_Uebung_B_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}