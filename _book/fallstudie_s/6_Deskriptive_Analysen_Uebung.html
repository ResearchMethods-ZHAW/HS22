<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Research Methods - 67&nbsp; 6. Übung</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../fallstudie_s/6_Desktiptive_Analysen_Loesung.html" rel="next">
<link href="../fallstudie_s/5_Import_Vorverarbeitung_Loesung.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">6. Übung</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Research Methods</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ResearchMethods-ZHAW/HS22/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Willkommen</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Prepro</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro1_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 1: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro1_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">PrePro 1: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro2_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 2: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro2_Uebung_A.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 2: Übung A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro2_Uebung_B.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 2: Übung B</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro3_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 3: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prepro/Prepro3_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Prepro 3: Übung</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">InfoVis</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis1_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 1: Demo A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis1_Script_eda.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 1: Demo B</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis1_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 1: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis2_cairo_wheel.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 2: Cairo Wheel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis2_Uebung_A.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 2: Übung A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../infovis/Infovis2_Uebung_B.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Infovis 2: Übung B</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Stat1-4</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik1_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat1: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik1_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat1: Loesung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik1_Novanimal.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat1: NOVANIMAL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik1_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat1: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Loesung_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Loesung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Loesung_2223s.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Lösung 2223s</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Loesung_23n.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Lösung 23n</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Loesung_Beispiel.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Lösung Beispiel</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik2_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat2: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik3_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat3: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik3_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat3: Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik3_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat3: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik4_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat4: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik4_Loesung_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat4: Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik4_Loesung_2n.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat4: Lösung 2n</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik4_Loesung_2s.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat4: Lösung 2s</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat1-4/Statistik4_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat4: Übung</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Stat5-8</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik5_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat5: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik5_Loesung_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat5: Lösung 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik5_Loesung_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat5: Lösung 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik5_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat5: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik6_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat6: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik6_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat6: Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik6_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat6: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik7_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat7: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik7_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat7: Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik7_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat7: Übung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik8_Demo.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat8: Demo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik8_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat8: Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stat5-8/Statistik8_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Stat8: Übung</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">StatKons</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons1_Demo_assoziationen.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons1: Demo 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons1_Demo_open_datasets.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons1: Datensätze</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons1_Demo_suggest_datasets.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons1: Datensätze</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons2_Demo_PCA.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons2: Demo</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons3_Demo_LM.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons3: Demo</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../statKons/StatKons4_Demo_GLM.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">StatKons4: Demo</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Rauman</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman1_Uebung_A.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 1: Übung A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman1_Uebung_B.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 1: Übung B</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman2_Uebung_A.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 2: Übung A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman2_Uebung_B.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 2: Übung B</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman2_Uebung_C.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 2: Übung C</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman3_Uebung_A.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 3: Übung A</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman4_Uebung_A_ahp.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 4: Übung A</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman4_Uebung_B_raster.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 4: Übung B</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../rauman/Rauman5_Uebung_mce.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Rauman 5: Übung</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">Fallstudie S</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/1_Einleitung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1. Einleitung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/2_Felderhebung_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2: Felderhebung Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/2_Felderhebung_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2: Felderhebung Lösung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/3_Aufgabenstellung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3. Aufgabenstellung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/4_Projektierung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4. Anleitung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/5_Import_Vorverarbeitung_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5. Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/5_Import_Vorverarbeitung_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5. Lösung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/6_Deskriptive_Analysen_Uebung.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">6. Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/6_Desktiptive_Analysen_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6. Lösung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/7_Multivariate_Statistik_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_s/7_Multivariate_Statistik_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7. Übung</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">Fallstudie N</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/1_Vorbemerkung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">1. Vorbemerkung</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/2_Datenverarbeitung_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/2_Datenverarbeitung_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">2. Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/3_Berechnung_Homeranges_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/3_Berechnung_Homeranges_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3. Aufgabe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/4_Multivariate_Modelle_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/4_Multivariate_Modelle_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4. Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/5_Variablenselektion_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/5_Variablenselektion_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">5. Aufgabe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/6_Guete_und_Diagnostics_Loesung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6. Lösung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/6_Guete_und_Diagnostics_Uebung.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">6. Übung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../fallstudie_n/7_Modelle_mit_Nutzungsintensitaet.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7. Nutzungsintensität</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#aufgabe-1-verlauf-der-besuchszahlen-m" id="toc-aufgabe-1-verlauf-der-besuchszahlen-m" class="nav-link active" data-scroll-target="#aufgabe-1-verlauf-der-besuchszahlen-m">Aufgabe 1: Verlauf der Besuchszahlen / m</a></li>
  <li><a href="#aufgabe-2-wochengang" id="toc-aufgabe-2-wochengang" class="nav-link" data-scroll-target="#aufgabe-2-wochengang">Aufgabe 2: Wochengang</a>
  <ul class="collapse">
  <li><a href="#a" id="toc-a" class="nav-link" data-scroll-target="#a">2a)</a></li>
  <li><a href="#b" id="toc-b" class="nav-link" data-scroll-target="#b">2b)</a></li>
  <li><a href="#c" id="toc-c" class="nav-link" data-scroll-target="#c">2c)</a></li>
  </ul></li>
  <li><a href="#aufgabe-3-tagesgang" id="toc-aufgabe-3-tagesgang" class="nav-link" data-scroll-target="#aufgabe-3-tagesgang">Aufgabe 3: Tagesgang</a>
  <ul class="collapse">
  <li><a href="#a-1" id="toc-a-1" class="nav-link" data-scroll-target="#a-1">3a)</a></li>
  <li><a href="#b-1" id="toc-b-1" class="nav-link" data-scroll-target="#b-1">3b)</a></li>
  <li><a href="#c-1" id="toc-c-1" class="nav-link" data-scroll-target="#c-1">3c)</a></li>
  </ul></li>
  <li><a href="#aufgabe-4-kennzahlen" id="toc-aufgabe-4-kennzahlen" class="nav-link" data-scroll-target="#aufgabe-4-kennzahlen">Aufgabe 4: Kennzahlen</a>
  <ul class="collapse">
  <li><a href="#a-2" id="toc-a-2" class="nav-link" data-scroll-target="#a-2">4a)</a></li>
  <li><a href="#b-2" id="toc-b-2" class="nav-link" data-scroll-target="#b-2">4b)</a></li>
  <li><a href="#c-2" id="toc-c-2" class="nav-link" data-scroll-target="#c-2">4c)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block"><span class="chapter-title">6. Übung</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Benoetigte Bibliotheken ####</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Data wrangling und piping</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.8     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.4.1
✔ readr   2.1.2     ✔ forcats 0.5.2
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># Arbeiten mit Datumsformaten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'

The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)<span class="co"># schnelles Dateneinlesen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'

The following objects are masked from 'package:lubridate':

    hour, isoweek, mday, minute, month, quarter, second, wday, week,
    yday, year

The following objects are masked from 'package:dplyr':

    between, first, last

The following object is masked from 'package:purrr':

    transpose</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)    <span class="co"># to arrange multiple plots in one graph</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PerformanceAnalytics) <span class="co"># Plotte Korrelationsmatrix</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: xts
Loading required package: zoo

Attaching package: 'zoo'

The following objects are masked from 'package:base':

    as.Date, as.Date.numeric


Attaching package: 'xts'

The following objects are masked from 'package:data.table':

    first, last

The following objects are masked from 'package:dplyr':

    first, last


Attaching package: 'PerformanceAnalytics'

The following object is masked from 'package:graphics':

    legend</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MuMIn)     <span class="co"># Multi-Model Inference</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AICcmodavg)<span class="co"># Modellaverageing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'AICcmodavg'

The following objects are masked from 'package:MuMIn':

    AICc, DIC, importance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fitdistrplus)<span class="co"># Prueft die Verteilung in Daten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: MASS

Attaching package: 'MASS'

The following object is masked from 'package:dplyr':

    select

Loading required package: survival</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)      <span class="co"># Multivariate Modelle</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Matrix

Attaching package: 'Matrix'

The following objects are masked from 'package:tidyr':

    expand, pack, unpack


Attaching package: 'lme4'

The following object is masked from 'package:AICcmodavg':

    checkConv</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(blmeco)    <span class="co"># Bayesian data analysis using linear models</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)    <span class="co"># Plotten von Modellergebnissen (tab_model)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#refugeeswelcome</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)   <span class="co"># einfaches plotten von Zusammenhängen zwischen Variablen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start und Ende ####</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Untersuchungszeitraum, ich waehle hier das Jahr 2019 bis und mit Sommer 2021</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>depo_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-01-01"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>depo_end <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-7-27"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Start und Ende Lockdown</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># definieren, wichtig fuer die spaeteren Auswertungen</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>lock_1_start_2020 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-03-16"</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>lock_1_end_2020 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-05-11"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>lock_2_start_2021 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-12-22"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>lock_2_end_2021 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-03-01"</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ebenfalls muessen die erste und letzte Kalenderwoche der Untersuchungsfrist definiert werden</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Diese werden bei Wochenweisen Analysen ebenfalls ausgeklammert da sie i.d.R. unvollstaendig sind</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>KW_start <span class="ot">&lt;-</span> <span class="fu">week</span>(depo_start)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>KW_end <span class="ot">&lt;-</span> <span class="fu">week</span>(depo_end)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Erster und letzter Tag der Ferien</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co"># je nach Untersuchungsdauer muessen hier weitere oder andere Ferienzeiten ergaenzt werden</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># (https://www.schulferien.org/schweiz/ferien/2020/)</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-04-13"</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-04-28"</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>Sommerferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-07-6"</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>Sommerferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-08-18"</span>)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>Herbstferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-10-05"</span>)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>Herbstferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-10-20"</span>)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>Winterferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-12-21"</span>)</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>Winterferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-01-02"</span>)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-04-11"</span>)</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-04-26"</span>)</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>Sommerferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-07-11"</span>)</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>Sommerferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-08-16"</span>)</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>Herbstferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-10-03"</span>)</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>Herbstferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-10-18"</span>)</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>Winterferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-12-19"</span>)</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>Winterferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-03"</span>)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2021_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-04-24"</span>)</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2021_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-05-09"</span>)</span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>Sommerferien_2021_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-07-17"</span>)</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. DATENIMPORT #####</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Beim Daten einlesen koennen sogleich die Datentypen und erste Bereinigungen vorgenommen werden</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.1 Zaehldaten ####</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Zaehldaten des Wildnispark wurden vorgaengig bereinigt. z.B. wurden Stundenwerte </span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a><span class="co"># entfernt, an denen am Zaehler Wartungsarbeiten stattgefunden haben.</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a><span class="co"># lese die Daten mithilfe der Bibliothek data.table ein (alternative zu read_csv und dergleichen). </span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Je nach Bedarf muss der Speicherort sowie der Dateiname angepasst werden</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"211_sihlwaldstrasse_2017_2021.csv"</span>))</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis zu den Daten:</span></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a><span class="co"># In hourly analysis format, the data at 11:00 am corresponds to the counts saved between </span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a><span class="co"># 11:00 am and 12:00 am.</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Anpassen der Datentypen und erstes Sichten</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(depo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  40152 obs. of  5 variables:
 $ DatumUhrzeit: chr  "01.01.2017 00:00" "01.01.2017 01:00" "01.01.2017 02:00" "01.01.2017 03:00" ...
 $ Fuss_IN     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Fuss_OUT    : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Velo_IN     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Velo_OUT    : int  0 0 0 0 0 0 0 0 0 0 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Datum_Uhrzeit =</span> <span class="fu">as.character</span>(DatumUhrzeit)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Datum_Uhrzeit, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Datum"</span>, <span class="st">"Zeit"</span>), <span class="at">sep =</span> <span class="st">" "</span>)<span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Datum =</span> <span class="fu">as.Date</span>(Datum, <span class="at">format =</span> <span class="st">"%d.%m.%Y"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Schneide das df auf den gewuenschten Zeitraum zu</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Datum <span class="sc">&gt;=</span> depo_start, Datum <span class="sc">&lt;=</span>  depo_end) <span class="co"># das Komma hat die gleiche Funktion wie ein &amp;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># In dieser Auswertung werden nur Velos betrachtet!</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>] <span class="co"># mit diesem Befehl lassen wir Spalten "fallen", </span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                                     <span class="co"># aendern aber nichts an der Form des data.frames</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Berechnen des Totals, da dieses in den Daten nicht vorhanden ist</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo<span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> Fuss_IN <span class="sc">+</span> Fuss_OUT)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Entferne die NA's in dem df.</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(depo)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.2 Meteodaten ####</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Einlesen</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"order_97149_data.txt"</span>))</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Datentypen setzen</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Das Datum wird als Integer erkannt. Zuerst muss es in Text umgewaldelt werden aus dem dann</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co"># das eigentliche Datum herausgelesen werden kann</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> <span class="fu">transform</span>(meteo, <span class="at">time =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(time), <span class="st">"%Y%m%d"</span>))</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Die eigentlichen Messwerte sind alle nummerisch</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> meteo<span class="sc">%&gt;%</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tre200jx =</span> <span class="fu">as.numeric</span>(tre200jx))<span class="sc">%&gt;%</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rre150j0 =</span> <span class="fu">as.numeric</span>(rre150j0))<span class="sc">%&gt;%</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sremaxdv =</span> <span class="fu">as.numeric</span>(sremaxdv)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time <span class="sc">&gt;=</span> depo_start, time <span class="sc">&lt;=</span>  depo_end) <span class="co"># schneide dann auf Untersuchungsdauer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mask$eval_all_mutate(quo): NAs introduced by coercion

Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Was ist eigentlich Niederschlag:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.meteoschweiz.admin.ch/home/wetter/wetterbegriffe/niederschlag.html</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtere Werte mit NA</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> meteo <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(stn)) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(time))<span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(tre200jx))<span class="sc">%&gt;%</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rre150j0))<span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sremaxdv))</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Pruefe ob alles funktioniert hat</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(meteo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  939 obs. of  5 variables:
 $ stn     : chr  "WAE" "WAE" "WAE" "WAE" ...
 $ time    : Date, format: "2019-01-01" "2019-01-02" ...
 $ tre200jx: num  4.9 2.7 0 1.5 2.3 2.2 2.8 4.1 2 -0.5 ...
 $ rre150j0: num  0 0 0 0 8.4 3.9 0 8.1 1.8 4.6 ...
 $ sremaxdv: num  0 0 58 73 0 0 0 0 0 0 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(meteo)) <span class="co"># zeigt die Anzahl NA's im data.frame an</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. VORBEREITUNG DER DATEN #####</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.1 Convinience Variablen ####</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># fuege dem Dataframe (df) die Wochentage hinzu</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochentag =</span> <span class="fu">weekdays</span>(Datum)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># R sortiert die Levels aplhabetisch. Da das in unserem Fall aber sehr unpraktisch ist,</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># muessen die Levels manuell manuell bestimmt werden</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochentag =</span> base<span class="sc">::</span><span class="fu">factor</span>(Wochentag, </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Montag"</span>, <span class="st">"Dienstag"</span>, <span class="st">"Mittwoch"</span>, </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Donnerstag"</span>, <span class="st">"Freitag"</span>, <span class="st">"Samstag"</span>, <span class="st">"Sonntag"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Werktag oder Wochenende hinzufuegen</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochenende =</span> <span class="fu">if_else</span>(Wochentag <span class="sc">==</span> <span class="st">"Montag"</span> <span class="sc">|</span> Wochentag <span class="sc">==</span> <span class="st">"Dienstag"</span> <span class="sc">|</span> </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>                           Wochentag <span class="sc">==</span> <span class="st">"Mittwoch"</span> <span class="sc">|</span> Wochentag <span class="sc">==</span> <span class="st">"Donnerstag"</span> <span class="sc">|</span> </span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>                           Wochentag <span class="sc">==</span> <span class="st">"Freitag"</span>, <span class="st">"Werktag"</span>, <span class="st">"Wochenende"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Kalenderwoche hinzufuegen</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KW=</span> <span class="fu">week</span>(Datum))<span class="sc">%&gt;%</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># monat und Jahr</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Monat =</span> <span class="fu">month</span>(Datum)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Jahr =</span> <span class="fu">year</span>(Datum))</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co">#Lockdown </span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis: ich mache das nachgelagert, da ich die Erfahrung hatte, dass zu viele </span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Operationen in einem Schritt auch schon mal durcheinander erzeugen koennen.</span></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis II: Wir packen alle Phasen (normal, die beiden Lockdowns und Covid aber ohne Lockdown)</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a><span class="co"># in eine Spalte --&gt; long ist schoener als wide</span></span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span></span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">Phase =</span> <span class="fu">if_else</span>(Datum <span class="sc">&gt;=</span> lock_1_start_2020 <span class="sc">&amp;</span> Datum <span class="sc">&lt;=</span> lock_1_end_2020,</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Lockdown_1"</span>,</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">if_else</span>(Datum <span class="sc">&gt;=</span> lock_2_start_2021 <span class="sc">&amp;</span> Datum <span class="sc">&lt;=</span> lock_2_end_2021,</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Lockdown_2"</span>,</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">if_else</span>(Datum <span class="sc">&lt;</span> lock_1_start_2020,</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"Normal"</span>, <span class="st">"Covid"</span>))))</span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a><span class="co"># hat das gepklappt?!</span></span>
<span id="cb26-38"><a href="#cb26-38" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(depo<span class="sc">$</span>Phase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Normal"     "Lockdown_1" "Covid"      "Lockdown_2"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># aendere die Datentypen</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochenende =</span> <span class="fu">as.factor</span>(Wochenende)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KW =</span> <span class="fu">factor</span>(KW)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mit factor() koennen die levels direkt einfach selbst definiert werden.</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># wichtig: speizfizieren, dass aus R base, ansonsten kommt es zu einem </span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mix-up mit anderen packages</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Phase =</span> base<span class="sc">::</span><span class="fu">factor</span>(Phase, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Normal"</span>, <span class="st">"Lockdown_1"</span>, <span class="st">"Lockdown_2"</span>, <span class="st">"Covid"</span>)))</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(depo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  22088 obs. of  11 variables:
 $ Fuss_IN   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Fuss_OUT  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Datum     : Date, format: "2019-01-01" "2019-01-01" ...
 $ Zeit      : chr  "00:00" "01:00" "02:00" "03:00" ...
 $ Total     : int  0 0 0 0 0 0 0 0 0 0 ...
 $ Wochentag : Factor w/ 7 levels "Montag","Dienstag",..: NA NA NA NA NA NA NA NA NA NA ...
 $ Wochenende: Factor w/ 0 levels: NA NA NA NA NA NA NA NA NA NA ...
 $ KW        : Factor w/ 53 levels "1","2","3","4",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ Monat     : int  1 1 1 1 1 1 1 1 1 1 ...
 $ Jahr      : int  2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 ...
 $ Phase     : Factor w/ 4 levels "Normal","Lockdown_1",..: 1 1 1 1 1 1 1 1 1 1 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fuer einige Auswertungen muss auf die Stunden als nummerischer Wert zurueckgegriffen werden</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Stunde <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(<span class="fu">as.POSIXct</span>(depo<span class="sc">$</span>Zeit,<span class="at">format=</span><span class="st">"%H:%M"</span>),<span class="st">"%H"</span>))</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Daten wurden kalibriert. Wir runden sie fuer unserer Analysen auf Ganzzahlen</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Total, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Fuss_IN <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Fuss_IN, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Fuss_OUT <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Fuss_OUT, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.3 Aggregierung der Stundendaten zu ganzen Tagen ####</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Zur Berechnung von Kennwerten ist es hilfreich, wenn neben den Stundendaten auch auf Ganztagesdaten</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># zurueckgegriffen werden kann</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="co"># hier werden also pro Nutzergruppe und Richtung die Stundenwerte pro Tag aufsummiert</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>depo_d <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datum, Wochentag, Wochenende, KW, Monat, Jahr, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Fuss_IN <span class="sc">+</span> Fuss_OUT), </span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">Fuss_IN =</span> <span class="fu">sum</span>(Fuss_IN),</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">Fuss_OUT =</span> <span class="fu">sum</span>(Fuss_OUT)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Datum', 'Wochentag', 'Wochenende', 'KW',
'Monat', 'Jahr'. You can override using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wenn man die Convinience Variablen als grouping variable einspeisst, dann werden sie in </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># das neue df uebernommen und muessen nicht nochmals hinzugefuegt werden</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pruefe das df</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(depo_d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 10
# Groups:   Datum, Wochentag, Wochenende, KW, Monat, Jahr [6]
  Datum      Wochentag Wochenende KW    Monat  Jahr Phase  Total Fuss_IN Fuss_…¹
  &lt;date&gt;     &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 2019-01-01 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    21      11      10
2 2019-01-02 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    36      20      16
3 2019-01-03 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    26      14      12
4 2019-01-04 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    10       7       3
5 2019-01-05 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    12       8       4
6 2019-01-06 &lt;NA&gt;      &lt;NA&gt;       1         1  2019 Normal    25      15      10
# … with abbreviated variable name ¹​Fuss_OUT</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gruppiere die Werte nach Monat</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Jahr, Monat) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Jahr'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sortiere das df aufsteigend (nur das es sicher stimmt)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(depo_m)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>depo_m[</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(depo_m, <span class="fu">order</span>(Jahr, Monat)),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Jahr Monat Total
1  2019     1   437
2  2019     2   479
3  2019     3   832
4  2019     4  1050
5  2019     5  1385
6  2019     6  1658
7  2019     7  1162
8  2019     8  1115
9  2019     9   865
10 2019    10   790
11 2019    11   635
12 2019    12   460
13 2020     1   633
14 2020     2   623
15 2020     3  1473
16 2020     4  3038
17 2020     5  2905
18 2020     6  1333
19 2020     7  1185
20 2020     8  1335
21 2020     9  1197
22 2020    10  1650
23 2020    11  1353
24 2020    12   935
25 2021     1   862
26 2021     2   992
27 2021     3  1002
28 2021     4  1888
29 2021     5  1962
30 2021     6  1304
31 2021     7   831</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mache dann aus Jahr und Monat faktoren</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> depo_m <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Jahr =</span> <span class="fu">as.factor</span>(Jahr)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Monat =</span> <span class="fu">as.factor</span>(Monat)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ym =</span> <span class="fu">paste</span>(Jahr, Monat)) <span class="sc">%&gt;%</span> <span class="co"># und mache eine neue Spalte, in der Jahr und</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ym=</span> <span class="fu">factor</span>(Ym, <span class="at">levels=</span><span class="fu">unique</span>(Ym))) <span class="co"># Monat in zusammen sind</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. DESKRIPTIVE ANALYSE UND VISUALISIERUNG #####</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.1 Verlauf der Besuchszahlen / m ####</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Monatliche Summen am Standort</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># wann beginnt die Datenreihe schon wieder?</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(depo_m<span class="sc">$</span>Ym)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2019 1
31 Levels: 2019 1 2019 2 2019 3 2019 4 2019 5 2019 6 2019 7 2019 8 ... 2021 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># und wann ist die fertig?</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">last</span>(depo_m<span class="sc">$</span>Ym)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2021 7
31 Levels: 2019 1 2019 2 2019 3 2019 4 2019 5 2019 6 2019 7 2019 8 ... 2021 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotte</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(depo_m, <span class="at">mapping =</span> <span class="fu">aes</span>(Ym, Total, <span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span> <span class="co"># group 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 1</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 3"</span>, <span class="at">xmax=</span><span class="st">"2020 5"</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 2</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 12"</span>, <span class="at">xmax=</span><span class="st">"2021 3"</span>, </span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))), </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>),</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>))<span class="sc">+</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span> <span class="st">""</span>, <span class="at">y=</span><span class="st">"Fuss pro Monat"</span>, <span class="at">x =</span> <span class="st">"Jahr"</span>)<span class="sc">+</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.2 Wochengang ####</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mean / d / phase</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>mean_phase_wd <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Wochentag, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Wochentag'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_d)<span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span> Wochentag, <span class="at">y =</span> Total, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>, <span class="at">y=</span> <span class="st">"Anzahl pro Tag"</span>)<span class="sc">+</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>))<span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Statistik: Unterschied WE und WO während Lockdown 1</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(depo_d<span class="sc">$</span>Total[depo_d<span class="sc">$</span>Phase <span class="sc">==</span> <span class="st">"Lockdown_1"</span> <span class="sc">&amp;</span> depo_d<span class="sc">$</span>Wochenende<span class="sc">==</span><span class="st">"Werktag"</span>], </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>       depo_d<span class="sc">$</span>Total [depo_d<span class="sc">$</span>Phase <span class="sc">==</span> <span class="st">"Lockdown_1"</span> <span class="sc">&amp;</span> depo_d<span class="sc">$</span>Wochenende<span class="sc">==</span><span class="st">"Wochenende"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in t.test.default(depo_d$Total[depo_d$Phase == "Lockdown_1" &amp; depo_d$Wochenende == : not enough 'x' observations</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.3 Tagesgang ####</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Bei diesen Berechnungen wird jeweils der Mittelwert pro Stunde berechnet. </span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># wiederum nutzen wir dafuer "pipes"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>Mean_h <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Wochentag, Stunde, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Wochentag', 'Stunde'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>Mean_h<span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(Mean_h,<span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"Total"</span>),</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">value.name =</span> <span class="st">"Total"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in loadNamespace(x): there is no package called 'reshape2'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotte den Tagesgang, unterteilt nach Wochentagen</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Normal</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>tag_norm <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Normal"</span>)), </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>),  <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Lockdown 1</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>tag_lock_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lockdown_1"</span>)), </span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Lockdown 2</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>tag_lock_2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lockdown_2"</span>)), </span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Covid</span></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>tag_covid <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Covid"</span>)), </span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Tagesgang</span></span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(tag_lock_1<span class="sc">+</span>            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span>   <span class="co"># plot 1 braucht es nicht alle Achsenbeschriftungen</span></span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),            </span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>          tag_lock_2<span class="sc">+</span>            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   <span class="co"># bei plot 2 brauchen wir keine Achsenbeschriftung</span></span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>)<span class="sc">+</span></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span></span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),</span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>          tag_norm,</span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a>          tag_covid<span class="sc">+</span></span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   </span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>),</span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="dv">1</span>),  <span class="co"># beide plots sind wegen der fehlenden Beschriftung nicht gleich hoch</span></span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.9</span>),    </span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Lockdown 1"</span>, <span class="st">"b) Lockdown 2"</span>, <span class="st">"c) Normal"</span>, <span class="st">"d) Covid"</span>),</span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="fl">0.1</span>,        <span class="co"># wo stehen die Plottitel</span></span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">0.99</span>,</span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).
Removed 24 row(s) containing missing values (geom_path).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.4 Kennzahlen ####</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>total_phase <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gruppiere nach Phasen inkl. Normal. Diese Levels haben wir bereits definiert</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total),</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">IN =</span> <span class="fu">sum</span>(Fuss_IN),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">OUT =</span> <span class="fu">sum</span>(Fuss_OUT))</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co"># mean besser Vergleichbar, da Zeitreihen unterschiedlich lange</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total),</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">IN =</span> <span class="fu">mean</span>(Fuss_IN),</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">OUT =</span> <span class="fu">mean</span>(Fuss_OUT))</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co"># berechne prozentuale Richtungsverteilung</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_IN =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>IN, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="co"># berechnen und auf eine Nachkommastelle runden</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_OUT =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>OUT,<span class="dv">1</span>))</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a><span class="co"># selektiere absolute Zahlen</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="co"># behalte rel. Spalten (nur die relativen Prozentangaben)</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> mean_phase_d[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(mean_phase_d_abs, </span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"IN"</span>,<span class="st">"OUT"</span>),</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">value.name =</span> <span class="st">"Durchschnitt"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in loadNamespace(x): there is no package called 'reshape2'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selektiere relative Zahlen</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># behalte rel. Spalten (nur die relativen Prozentangaben)</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>mean_phase_d_proz <span class="ot">&lt;-</span> mean_phase_d[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>mean_phase_d_proz <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(mean_phase_d_proz, </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"Proz_IN"</span>,<span class="st">"Proz_OUT"</span>),</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">value.name =</span> <span class="st">"Durchschnitt"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in loadNamespace(x): there is no package called 'reshape2'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisierung abs</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>abs <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_abs, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [mean]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisierung %</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>proz <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_proz, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [%]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Verteilung</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(abs,            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>          proz,            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">1</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">1</span>),        <span class="co"># beide sind bleich hoch</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.95</span>),    <span class="co"># plot 2 ist aufgrund der fehlenden y-achsenbesch. etwas schmaler</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Absolute Verteilung"</span>, <span class="st">"b) Relative Verteilung"</span>),</span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="dv">0</span>,        <span class="co"># wo stehen die labels</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">1.0</span>,</span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in FUN(X[[i]], ...): object 'Durchschnitt' not found</code></pre>
</div>
</div>
<section id="aufgabe-1-verlauf-der-besuchszahlen-m" class="level1">
<h1>Aufgabe 1: Verlauf der Besuchszahlen / m</h1>
<p>Nachdem wir die Projektstruktur aufgebaut haben und die Daten vorbereitet sind, machen wir uns an die deskriptive Analyse. Dies macht eigentlich immer Sinn. Bevor mach sich an die schliessende Statistik macht, muss man ein “Gefühl” für die Daten bekommen. Dies funktioniert am einfachsten mit deskriptiven, explorativen Analysen.</p>
<p>Wir interessieren uns in den Analysen grundsätzlich für 4 Zeitabschnitte:</p>
<ol type="1">
<li>Normal (vom Start der Erhebungen bis vor dem ersten Lockdown)</li>
<li>Lockdown 1</li>
<li>Lockdown 2</li>
<li>Seit Covid, aber nicht während eines Lockdowns</li>
</ol>
<p>Wir haben relativ lange Zeitreihen. Zur Visualisierung des generellen Trends greifen wir darum auf die aggregierten Daten zurück - das macht den Plot übersichtlicher und damit aussagekräftiger.</p>
<ul>
<li>Plottet den Verlauf der monatlichen Besuchszahlen an eurer Zählstelle. Auf der x-Achse steht dabei dabei Jahr und Monat (gespeichert im df <em>depo_m</em>), auf der y-Achse die monatlichen Besuchszahlen. Zeichnet auch die beiden Lockdown ein (Hinweis: rundet das Start- und Enddatum des Lockdowns auf den Monat, da im Plot die monatlichen Zahlen gezeigt werden).</li>
</ul>
<p>Haltet euch dabei an untenstehenden Plot:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Hinweis:</strong> - Nutzt zum plotten <strong>ggplot()</strong> - folgende Codeschnipsel helfen euch:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_m, <span class="at">mapping =</span> <span class="fu">aes</span>(Ym, Total, <span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span> <span class="co"># group 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne Lockdown 1; ein einfaches Rechteck. bestimme mit min und max die Dimensionen</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 3"</span>, <span class="at">xmax=</span><span class="st">"2020 5"</span>,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))), <span class="co"># das Rechteck soll 10 % grösser als die maximale Besuchszahl sein </span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne Lockdown 2</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    ...<span class="sc">+</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne die Linie</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(...)<span class="sc">+</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bestimme manuell, wo auf der x-Achse die breaks sind und wie diese angeschrieben werden sollen</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"..."</span>, <span class="st">"..."</span>, ...),</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"..."</span>, <span class="st">"..."</span>, ...))<span class="sc">+</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Exportiert euren Plot mit <strong>ggsave()</strong> nach <strong>results</strong>. Breite = 20, Höhe = 10, Einheiten = cm, dpi = 1000</li>
</ul>
</section>
<section id="aufgabe-2-wochengang" class="level1">
<h1>Aufgabe 2: Wochengang</h1>
<p>Nachdem wir nun wissen, wie sich die Besuchszahlen während der Untersuchungsdauer monatlich entwickelt haben, möchten wir genauer untersuchen, wie sich die Zahlen je nach Phase (Normal, Lockdown 1. Lockdown 2 und Covid) auf die Wochentage verteilen.</p>
<section id="a" class="level2">
<h2 class="anchored" data-anchor-id="a">2a)</h2>
<ul>
<li>Berechnet zuerst die Totale Anzahl pro Wochentag pro Phase.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mean_phase_wd <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Speichert das als .csv</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mean_phase_wd, <span class="st">"results/mean_phase_wd.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="b" class="level2">
<h2 class="anchored" data-anchor-id="b">2b)</h2>
<ul>
<li>Erstellt einen Boxplot nach untenstehender Vorgabe:</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Hinweis:</strong> - Nutzt zum plotten <strong>ggplot()</strong> - folgende Codeschnipsel helfen euch:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_d)<span class="sc">+</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span> Wochentag, <span class="at">y =</span> Total, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Exportiert auch diesen Plot mit <strong>ggsave()</strong>. Welche Breite und Höhe passt hier?</li>
</ul>
</section>
<section id="c" class="level2">
<h2 class="anchored" data-anchor-id="c">2c)</h2>
<p>Sind die Unterschiede zwischen Werktag und Wochenende wirklich signifikant? Falls ja, in allen Phasen oder nur während bestimmter?</p>
<ul>
<li>Prüft das pro Phase mit einem einfachen t.test.</li>
</ul>
</section>
</section>
<section id="aufgabe-3-tagesgang" class="level1">
<h1>Aufgabe 3: Tagesgang</h1>
<p>Vom Grossen zum Kleinen, von der Übersicht ins Detail. Jetzt widmen wir uns dem Tagesgang, das heisst der Verteilung der Besuchenden auf die 24 Tagesstunden je nach Phase.</p>
<section id="a-1" class="level2">
<h2 class="anchored" data-anchor-id="a-1">3a)</h2>
<ul>
<li>Berechnet zuerst den Mittelwert der Totalen Besuchszahlen pro Wochentag pro Stunde pro Phase. (ganz ähnlich wie unter 2a) und speichert das df unter <strong>Mean_h</strong>.</li>
</ul>
<p>ggplots haben Daten lieber im Format long als wide.</p>
</section>
<section id="b-1" class="level2">
<h2 class="anchored" data-anchor-id="b-1">3b)</h2>
<ul>
<li>Plottet den Tagesgang, unterteilt nach den 7 Wochentagen nun für unsere 4 Phasen.</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 24 row(s) containing missing values (geom_path).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="6_Deskriptive_Analysen_Uebung_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Für die Phase “Normal” benutze ich folgenden Codeschnipsel. Speichert den Plot ab (hier: <strong>tag_norm</strong>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>tag_norm <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Normal"</span>)), </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Hinweis:</strong> Achtet darauf, dass die Skalierung der y-Achse bei allen 4 Plots dieselbe ist (z.B. immer vom 0 bis 25).</p>
</section>
<section id="c-1" class="level2">
<h2 class="anchored" data-anchor-id="c-1">3c)</h2>
<ul>
<li>Arrangiert die vier erstellten Plots und speichert das Resultat. Das ist etwas tricky, darum hier der vollständige Code.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Tagesgang</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(tag_lock_1<span class="sc">+</span>            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span>   <span class="co"># plot 1 braucht es nicht alle Achsenbeschriftungen</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),            </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>          tag_lock_2<span class="sc">+</span>            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   <span class="co"># bei plot 2 brauchen wir keine Achsenbeschriftung</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>)<span class="sc">+</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>          tag_norm,</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>          tag_covid<span class="sc">+</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   </span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>),</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="dv">1</span>),  <span class="co"># beide plots sind wegen der fehlenden Beschriftung nicht gleich hoch</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.9</span>),    </span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Lockdown 1"</span>, <span class="st">"b) Lockdown 2"</span>, <span class="st">"c) Normal"</span>, <span class="st">"d) Covid"</span>),</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="fl">0.1</span>,        <span class="co"># wo stehen die Plottitel</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">0.99</span>,</span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"Tagesgang.png"</span>, <span class="at">width=</span><span class="dv">25</span>, <span class="at">height=</span><span class="dv">25</span>, <span class="at">units=</span><span class="st">"cm"</span>, <span class="at">dpi=</span><span class="dv">1000</span>,</span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">path =</span> <span class="st">"results/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="aufgabe-4-kennzahlen" class="level1">
<h1>Aufgabe 4: Kennzahlen</h1>
<p>Schliesslich berechnen wir noch einige Kennzahlen (Anzahl Passagen, Richtungsverteilung, …).</p>
<section id="a-2" class="level2">
<h2 class="anchored" data-anchor-id="a-2">4a)</h2>
<ul>
<li><p>Gruppiert nach Phase und berechnet dieses mal die Summe (nicht den Durchschnitt) Total, IN und OUT (ähnlich wie in 2a und 3a).</p></li>
<li><p>Speichert das Ergebnis als .csv</p></li>
</ul>
</section>
<section id="b-2" class="level2">
<h2 class="anchored" data-anchor-id="b-2">4b)</h2>
<p>Die Zeitreihen der 4 Phasen unterscheiden sich deutlich voneinander. Totale Summen sind da kaum miteinander vergleichbar, besser eignet sich der Durchschnitt oder der Median.</p>
<ul>
<li><p>Gruppiert nach Phase und berechnet den Durchschnitt Total, IN und OUT und speichert das df unter <strong>mean_phase_d</strong>.</p></li>
<li><p>Ergänzt das mit der prozentualen Richtungsverteilung</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_IN =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>IN, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="co"># berechnen und auf eine Nachkommastelle runden</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Speichert das Ergebnis als .csv</p></li>
<li><p>Selektiert nun die absoluten Zahlen im df <strong>mean_phase_d</strong> sowie die relativen und speichert das jeweils in einem df <strong>mean_phase_d_abs</strong> und <strong>mean_phase_d_proz</strong>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Total, Proz_IN, Proz_OUT))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>transformiert beide df mittels <strong>pivot_longer()</strong> von wide zu long:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(mean_phase_d_abs, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"IN"</span>,<span class="st">"OUT"</span>), </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">"Gruppe"</span>, <span class="at">values_to =</span> <span class="st">"Durchschnitt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="c-2" class="level2">
<h2 class="anchored" data-anchor-id="c-2">4c)</h2>
<p>Nun visualisieren wie die Verteilung der absoluten und der relativen Zahlen nach Phasen in einem Barplot.</p>
<ul>
<li>Erstellt je einen Plot zu den absoluten und den relativen Zahlen nach den unterstehenden Vorgaben und speichert beide Plots im Environment:</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error in FUN(X[[i]], ...): object 'Durchschnitt' not found</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error in FUN(X[[i]], ...): object 'Durchschnitt' not found</code></pre>
</div>
</div>
<ul>
<li>Arrangiert beide Plots nebeneinander und exportiert das Ergebnis (Arrangieren siehe 3c).</li>
</ul>
<div class="cell">

</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../fallstudie_s/5_Import_Vorverarbeitung_Loesung.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">5. Lösung</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../fallstudie_s/6_Desktiptive_Analysen_Loesung.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-title">6. Lösung</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb72" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6. Übung</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>{{&lt; include /../_before-article.qmd &gt;}}</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Benoetigte Bibliotheken ####</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># Data wrangling und piping</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># Arbeiten mit Datumsformaten</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)<span class="co"># schnelles Dateneinlesen</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)    <span class="co"># to arrange multiple plots in one graph</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PerformanceAnalytics) <span class="co"># Plotte Korrelationsmatrix</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MuMIn)     <span class="co"># Multi-Model Inference</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AICcmodavg)<span class="co"># Modellaverageing</span></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fitdistrplus)<span class="co"># Prueft die Verteilung in Daten</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)      <span class="co"># Multivariate Modelle</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(blmeco)    <span class="co"># Bayesian data analysis using linear models</span></span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)    <span class="co"># Plotten von Modellergebnissen (tab_model)</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)   <span class="co"># einfaches plotten von Zusammenhängen zwischen Variablen</span></span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Start und Ende ####</span></span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Untersuchungszeitraum, ich waehle hier das Jahr 2019 bis und mit Sommer 2021</span></span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>depo_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-01-01"</span>)</span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a>depo_end <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-7-27"</span>)</span>
<span id="cb72-34"><a href="#cb72-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-35"><a href="#cb72-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Start und Ende Lockdown</span></span>
<span id="cb72-36"><a href="#cb72-36" aria-hidden="true" tabindex="-1"></a><span class="co"># definieren, wichtig fuer die spaeteren Auswertungen</span></span>
<span id="cb72-37"><a href="#cb72-37" aria-hidden="true" tabindex="-1"></a>lock_1_start_2020 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-03-16"</span>)</span>
<span id="cb72-38"><a href="#cb72-38" aria-hidden="true" tabindex="-1"></a>lock_1_end_2020 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-05-11"</span>)</span>
<span id="cb72-39"><a href="#cb72-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-40"><a href="#cb72-40" aria-hidden="true" tabindex="-1"></a>lock_2_start_2021 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-12-22"</span>)</span>
<span id="cb72-41"><a href="#cb72-41" aria-hidden="true" tabindex="-1"></a>lock_2_end_2021 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-03-01"</span>)</span>
<span id="cb72-42"><a href="#cb72-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-43"><a href="#cb72-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Ebenfalls muessen die erste und letzte Kalenderwoche der Untersuchungsfrist definiert werden</span></span>
<span id="cb72-44"><a href="#cb72-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Diese werden bei Wochenweisen Analysen ebenfalls ausgeklammert da sie i.d.R. unvollstaendig sind</span></span>
<span id="cb72-45"><a href="#cb72-45" aria-hidden="true" tabindex="-1"></a>KW_start <span class="ot">&lt;-</span> <span class="fu">week</span>(depo_start)</span>
<span id="cb72-46"><a href="#cb72-46" aria-hidden="true" tabindex="-1"></a>KW_end <span class="ot">&lt;-</span> <span class="fu">week</span>(depo_end)</span>
<span id="cb72-47"><a href="#cb72-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-48"><a href="#cb72-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Erster und letzter Tag der Ferien</span></span>
<span id="cb72-49"><a href="#cb72-49" aria-hidden="true" tabindex="-1"></a><span class="co"># je nach Untersuchungsdauer muessen hier weitere oder andere Ferienzeiten ergaenzt werden</span></span>
<span id="cb72-50"><a href="#cb72-50" aria-hidden="true" tabindex="-1"></a><span class="co"># (https://www.schulferien.org/schweiz/ferien/2020/)</span></span>
<span id="cb72-51"><a href="#cb72-51" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-04-13"</span>)</span>
<span id="cb72-52"><a href="#cb72-52" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-04-28"</span>)</span>
<span id="cb72-53"><a href="#cb72-53" aria-hidden="true" tabindex="-1"></a>Sommerferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-07-6"</span>)</span>
<span id="cb72-54"><a href="#cb72-54" aria-hidden="true" tabindex="-1"></a>Sommerferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-08-18"</span>)</span>
<span id="cb72-55"><a href="#cb72-55" aria-hidden="true" tabindex="-1"></a>Herbstferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-10-05"</span>)</span>
<span id="cb72-56"><a href="#cb72-56" aria-hidden="true" tabindex="-1"></a>Herbstferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-10-20"</span>)</span>
<span id="cb72-57"><a href="#cb72-57" aria-hidden="true" tabindex="-1"></a>Winterferien_2019_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2019-12-21"</span>)</span>
<span id="cb72-58"><a href="#cb72-58" aria-hidden="true" tabindex="-1"></a>Winterferien_2019_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-01-02"</span>)</span>
<span id="cb72-59"><a href="#cb72-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-60"><a href="#cb72-60" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-04-11"</span>)</span>
<span id="cb72-61"><a href="#cb72-61" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-04-26"</span>)</span>
<span id="cb72-62"><a href="#cb72-62" aria-hidden="true" tabindex="-1"></a>Sommerferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-07-11"</span>)</span>
<span id="cb72-63"><a href="#cb72-63" aria-hidden="true" tabindex="-1"></a>Sommerferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-08-16"</span>)</span>
<span id="cb72-64"><a href="#cb72-64" aria-hidden="true" tabindex="-1"></a>Herbstferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-10-03"</span>)</span>
<span id="cb72-65"><a href="#cb72-65" aria-hidden="true" tabindex="-1"></a>Herbstferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-10-18"</span>)</span>
<span id="cb72-66"><a href="#cb72-66" aria-hidden="true" tabindex="-1"></a>Winterferien_2020_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-12-19"</span>)</span>
<span id="cb72-67"><a href="#cb72-67" aria-hidden="true" tabindex="-1"></a>Winterferien_2020_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-03"</span>)</span>
<span id="cb72-68"><a href="#cb72-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-69"><a href="#cb72-69" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2021_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-04-24"</span>)</span>
<span id="cb72-70"><a href="#cb72-70" aria-hidden="true" tabindex="-1"></a>Fruehlingsferien_2021_ende <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-05-09"</span>)</span>
<span id="cb72-71"><a href="#cb72-71" aria-hidden="true" tabindex="-1"></a>Sommerferien_2021_start <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-07-17"</span>)</span>
<span id="cb72-72"><a href="#cb72-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-73"><a href="#cb72-73" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-74"><a href="#cb72-74" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. DATENIMPORT #####</span></span>
<span id="cb72-75"><a href="#cb72-75" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-76"><a href="#cb72-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-77"><a href="#cb72-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Beim Daten einlesen koennen sogleich die Datentypen und erste Bereinigungen vorgenommen werden</span></span>
<span id="cb72-78"><a href="#cb72-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-79"><a href="#cb72-79" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.1 Zaehldaten ####</span></span>
<span id="cb72-80"><a href="#cb72-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Zaehldaten des Wildnispark wurden vorgaengig bereinigt. z.B. wurden Stundenwerte </span></span>
<span id="cb72-81"><a href="#cb72-81" aria-hidden="true" tabindex="-1"></a><span class="co"># entfernt, an denen am Zaehler Wartungsarbeiten stattgefunden haben.</span></span>
<span id="cb72-82"><a href="#cb72-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-83"><a href="#cb72-83" aria-hidden="true" tabindex="-1"></a><span class="co"># lese die Daten mithilfe der Bibliothek data.table ein (alternative zu read_csv und dergleichen). </span></span>
<span id="cb72-84"><a href="#cb72-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Je nach Bedarf muss der Speicherort sowie der Dateiname angepasst werden</span></span>
<span id="cb72-85"><a href="#cb72-85" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"211_sihlwaldstrasse_2017_2021.csv"</span>))</span>
<span id="cb72-86"><a href="#cb72-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-87"><a href="#cb72-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis zu den Daten:</span></span>
<span id="cb72-88"><a href="#cb72-88" aria-hidden="true" tabindex="-1"></a><span class="co"># In hourly analysis format, the data at 11:00 am corresponds to the counts saved between </span></span>
<span id="cb72-89"><a href="#cb72-89" aria-hidden="true" tabindex="-1"></a><span class="co"># 11:00 am and 12:00 am.</span></span>
<span id="cb72-90"><a href="#cb72-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-91"><a href="#cb72-91" aria-hidden="true" tabindex="-1"></a><span class="co"># Anpassen der Datentypen und erstes Sichten</span></span>
<span id="cb72-92"><a href="#cb72-92" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(depo)</span>
<span id="cb72-93"><a href="#cb72-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-94"><a href="#cb72-94" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span></span>
<span id="cb72-95"><a href="#cb72-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Datum_Uhrzeit =</span> <span class="fu">as.character</span>(DatumUhrzeit)) <span class="sc">%&gt;%</span></span>
<span id="cb72-96"><a href="#cb72-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Datum_Uhrzeit, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Datum"</span>, <span class="st">"Zeit"</span>), <span class="at">sep =</span> <span class="st">" "</span>)<span class="sc">%&gt;%</span></span>
<span id="cb72-97"><a href="#cb72-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Datum =</span> <span class="fu">as.Date</span>(Datum, <span class="at">format =</span> <span class="st">"%d.%m.%Y"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-98"><a href="#cb72-98" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Schneide das df auf den gewuenschten Zeitraum zu</span></span>
<span id="cb72-99"><a href="#cb72-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Datum <span class="sc">&gt;=</span> depo_start, Datum <span class="sc">&lt;=</span>  depo_end) <span class="co"># das Komma hat die gleiche Funktion wie ein &amp;</span></span>
<span id="cb72-100"><a href="#cb72-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-101"><a href="#cb72-101" aria-hidden="true" tabindex="-1"></a><span class="co"># In dieser Auswertung werden nur Velos betrachtet!</span></span>
<span id="cb72-102"><a href="#cb72-102" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>] <span class="co"># mit diesem Befehl lassen wir Spalten "fallen", </span></span>
<span id="cb72-103"><a href="#cb72-103" aria-hidden="true" tabindex="-1"></a>                                     <span class="co"># aendern aber nichts an der Form des data.frames</span></span>
<span id="cb72-104"><a href="#cb72-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-105"><a href="#cb72-105" aria-hidden="true" tabindex="-1"></a><span class="co"># Berechnen des Totals, da dieses in den Daten nicht vorhanden ist</span></span>
<span id="cb72-106"><a href="#cb72-106" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo<span class="sc">%&gt;%</span></span>
<span id="cb72-107"><a href="#cb72-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> Fuss_IN <span class="sc">+</span> Fuss_OUT)</span>
<span id="cb72-108"><a href="#cb72-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-109"><a href="#cb72-109" aria-hidden="true" tabindex="-1"></a><span class="co"># Entferne die NA's in dem df.</span></span>
<span id="cb72-110"><a href="#cb72-110" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(depo)</span>
<span id="cb72-111"><a href="#cb72-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-112"><a href="#cb72-112" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.2 Meteodaten ####</span></span>
<span id="cb72-113"><a href="#cb72-113" aria-hidden="true" tabindex="-1"></a><span class="co"># Einlesen</span></span>
<span id="cb72-114"><a href="#cb72-114" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"order_97149_data.txt"</span>))</span>
<span id="cb72-115"><a href="#cb72-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-116"><a href="#cb72-116" aria-hidden="true" tabindex="-1"></a><span class="co"># Datentypen setzen</span></span>
<span id="cb72-117"><a href="#cb72-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Das Datum wird als Integer erkannt. Zuerst muss es in Text umgewaldelt werden aus dem dann</span></span>
<span id="cb72-118"><a href="#cb72-118" aria-hidden="true" tabindex="-1"></a><span class="co"># das eigentliche Datum herausgelesen werden kann</span></span>
<span id="cb72-119"><a href="#cb72-119" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> <span class="fu">transform</span>(meteo, <span class="at">time =</span> <span class="fu">as.Date</span>(<span class="fu">as.character</span>(time), <span class="st">"%Y%m%d"</span>))</span>
<span id="cb72-120"><a href="#cb72-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-121"><a href="#cb72-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Die eigentlichen Messwerte sind alle nummerisch</span></span>
<span id="cb72-122"><a href="#cb72-122" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> meteo<span class="sc">%&gt;%</span></span>
<span id="cb72-123"><a href="#cb72-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tre200jx =</span> <span class="fu">as.numeric</span>(tre200jx))<span class="sc">%&gt;%</span></span>
<span id="cb72-124"><a href="#cb72-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rre150j0 =</span> <span class="fu">as.numeric</span>(rre150j0))<span class="sc">%&gt;%</span></span>
<span id="cb72-125"><a href="#cb72-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sremaxdv =</span> <span class="fu">as.numeric</span>(sremaxdv)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-126"><a href="#cb72-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time <span class="sc">&gt;=</span> depo_start, time <span class="sc">&lt;=</span>  depo_end) <span class="co"># schneide dann auf Untersuchungsdauer</span></span>
<span id="cb72-127"><a href="#cb72-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-128"><a href="#cb72-128" aria-hidden="true" tabindex="-1"></a><span class="co"># Was ist eigentlich Niederschlag:</span></span>
<span id="cb72-129"><a href="#cb72-129" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.meteoschweiz.admin.ch/home/wetter/wetterbegriffe/niederschlag.html</span></span>
<span id="cb72-130"><a href="#cb72-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-131"><a href="#cb72-131" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtere Werte mit NA</span></span>
<span id="cb72-132"><a href="#cb72-132" aria-hidden="true" tabindex="-1"></a>meteo <span class="ot">&lt;-</span> meteo <span class="sc">%&gt;%</span></span>
<span id="cb72-133"><a href="#cb72-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(stn)) <span class="sc">%&gt;%</span></span>
<span id="cb72-134"><a href="#cb72-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(time))<span class="sc">%&gt;%</span></span>
<span id="cb72-135"><a href="#cb72-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(tre200jx))<span class="sc">%&gt;%</span></span>
<span id="cb72-136"><a href="#cb72-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(rre150j0))<span class="sc">%&gt;%</span></span>
<span id="cb72-137"><a href="#cb72-137" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sremaxdv))</span>
<span id="cb72-138"><a href="#cb72-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Pruefe ob alles funktioniert hat</span></span>
<span id="cb72-139"><a href="#cb72-139" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(meteo)</span>
<span id="cb72-140"><a href="#cb72-140" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(meteo)) <span class="co"># zeigt die Anzahl NA's im data.frame an</span></span>
<span id="cb72-141"><a href="#cb72-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-142"><a href="#cb72-142" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-143"><a href="#cb72-143" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. VORBEREITUNG DER DATEN #####</span></span>
<span id="cb72-144"><a href="#cb72-144" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-145"><a href="#cb72-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-146"><a href="#cb72-146" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.1 Convinience Variablen ####</span></span>
<span id="cb72-147"><a href="#cb72-147" aria-hidden="true" tabindex="-1"></a><span class="co"># fuege dem Dataframe (df) die Wochentage hinzu</span></span>
<span id="cb72-148"><a href="#cb72-148" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb72-149"><a href="#cb72-149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochentag =</span> <span class="fu">weekdays</span>(Datum)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-150"><a href="#cb72-150" aria-hidden="true" tabindex="-1"></a>  <span class="co"># R sortiert die Levels aplhabetisch. Da das in unserem Fall aber sehr unpraktisch ist,</span></span>
<span id="cb72-151"><a href="#cb72-151" aria-hidden="true" tabindex="-1"></a>  <span class="co"># muessen die Levels manuell manuell bestimmt werden</span></span>
<span id="cb72-152"><a href="#cb72-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochentag =</span> base<span class="sc">::</span><span class="fu">factor</span>(Wochentag, </span>
<span id="cb72-153"><a href="#cb72-153" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Montag"</span>, <span class="st">"Dienstag"</span>, <span class="st">"Mittwoch"</span>, </span>
<span id="cb72-154"><a href="#cb72-154" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Donnerstag"</span>, <span class="st">"Freitag"</span>, <span class="st">"Samstag"</span>, <span class="st">"Sonntag"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb72-155"><a href="#cb72-155" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Werktag oder Wochenende hinzufuegen</span></span>
<span id="cb72-156"><a href="#cb72-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochenende =</span> <span class="fu">if_else</span>(Wochentag <span class="sc">==</span> <span class="st">"Montag"</span> <span class="sc">|</span> Wochentag <span class="sc">==</span> <span class="st">"Dienstag"</span> <span class="sc">|</span> </span>
<span id="cb72-157"><a href="#cb72-157" aria-hidden="true" tabindex="-1"></a>                           Wochentag <span class="sc">==</span> <span class="st">"Mittwoch"</span> <span class="sc">|</span> Wochentag <span class="sc">==</span> <span class="st">"Donnerstag"</span> <span class="sc">|</span> </span>
<span id="cb72-158"><a href="#cb72-158" aria-hidden="true" tabindex="-1"></a>                           Wochentag <span class="sc">==</span> <span class="st">"Freitag"</span>, <span class="st">"Werktag"</span>, <span class="st">"Wochenende"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb72-159"><a href="#cb72-159" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Kalenderwoche hinzufuegen</span></span>
<span id="cb72-160"><a href="#cb72-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KW=</span> <span class="fu">week</span>(Datum))<span class="sc">%&gt;%</span></span>
<span id="cb72-161"><a href="#cb72-161" aria-hidden="true" tabindex="-1"></a>  <span class="co"># monat und Jahr</span></span>
<span id="cb72-162"><a href="#cb72-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Monat =</span> <span class="fu">month</span>(Datum)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-163"><a href="#cb72-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Jahr =</span> <span class="fu">year</span>(Datum))</span>
<span id="cb72-164"><a href="#cb72-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-165"><a href="#cb72-165" aria-hidden="true" tabindex="-1"></a><span class="co">#Lockdown </span></span>
<span id="cb72-166"><a href="#cb72-166" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis: ich mache das nachgelagert, da ich die Erfahrung hatte, dass zu viele </span></span>
<span id="cb72-167"><a href="#cb72-167" aria-hidden="true" tabindex="-1"></a><span class="co"># Operationen in einem Schritt auch schon mal durcheinander erzeugen koennen.</span></span>
<span id="cb72-168"><a href="#cb72-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Hinweis II: Wir packen alle Phasen (normal, die beiden Lockdowns und Covid aber ohne Lockdown)</span></span>
<span id="cb72-169"><a href="#cb72-169" aria-hidden="true" tabindex="-1"></a><span class="co"># in eine Spalte --&gt; long ist schoener als wide</span></span>
<span id="cb72-170"><a href="#cb72-170" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span></span>
<span id="cb72-171"><a href="#cb72-171" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">Phase =</span> <span class="fu">if_else</span>(Datum <span class="sc">&gt;=</span> lock_1_start_2020 <span class="sc">&amp;</span> Datum <span class="sc">&lt;=</span> lock_1_end_2020,</span>
<span id="cb72-172"><a href="#cb72-172" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Lockdown_1"</span>,</span>
<span id="cb72-173"><a href="#cb72-173" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">if_else</span>(Datum <span class="sc">&gt;=</span> lock_2_start_2021 <span class="sc">&amp;</span> Datum <span class="sc">&lt;=</span> lock_2_end_2021,</span>
<span id="cb72-174"><a href="#cb72-174" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Lockdown_2"</span>,</span>
<span id="cb72-175"><a href="#cb72-175" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">if_else</span>(Datum <span class="sc">&lt;</span> lock_1_start_2020,</span>
<span id="cb72-176"><a href="#cb72-176" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"Normal"</span>, <span class="st">"Covid"</span>))))</span>
<span id="cb72-177"><a href="#cb72-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-178"><a href="#cb72-178" aria-hidden="true" tabindex="-1"></a><span class="co"># hat das gepklappt?!</span></span>
<span id="cb72-179"><a href="#cb72-179" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(depo<span class="sc">$</span>Phase)</span>
<span id="cb72-180"><a href="#cb72-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-181"><a href="#cb72-181" aria-hidden="true" tabindex="-1"></a><span class="co"># aendere die Datentypen</span></span>
<span id="cb72-182"><a href="#cb72-182" aria-hidden="true" tabindex="-1"></a>depo <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb72-183"><a href="#cb72-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Wochenende =</span> <span class="fu">as.factor</span>(Wochenende)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-184"><a href="#cb72-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KW =</span> <span class="fu">factor</span>(KW)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-185"><a href="#cb72-185" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mit factor() koennen die levels direkt einfach selbst definiert werden.</span></span>
<span id="cb72-186"><a href="#cb72-186" aria-hidden="true" tabindex="-1"></a>  <span class="co"># wichtig: speizfizieren, dass aus R base, ansonsten kommt es zu einem </span></span>
<span id="cb72-187"><a href="#cb72-187" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mix-up mit anderen packages</span></span>
<span id="cb72-188"><a href="#cb72-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Phase =</span> base<span class="sc">::</span><span class="fu">factor</span>(Phase, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Normal"</span>, <span class="st">"Lockdown_1"</span>, <span class="st">"Lockdown_2"</span>, <span class="st">"Covid"</span>)))</span>
<span id="cb72-189"><a href="#cb72-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-190"><a href="#cb72-190" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(depo)</span>
<span id="cb72-191"><a href="#cb72-191" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb72-192"><a href="#cb72-192" aria-hidden="true" tabindex="-1"></a><span class="co"># Fuer einige Auswertungen muss auf die Stunden als nummerischer Wert zurueckgegriffen werden</span></span>
<span id="cb72-193"><a href="#cb72-193" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Stunde <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(<span class="fu">as.POSIXct</span>(depo<span class="sc">$</span>Zeit,<span class="at">format=</span><span class="st">"%H:%M"</span>),<span class="st">"%H"</span>))</span>
<span id="cb72-194"><a href="#cb72-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-195"><a href="#cb72-195" aria-hidden="true" tabindex="-1"></a><span class="co"># Die Daten wurden kalibriert. Wir runden sie fuer unserer Analysen auf Ganzzahlen</span></span>
<span id="cb72-196"><a href="#cb72-196" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Total <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Total, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb72-197"><a href="#cb72-197" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Fuss_IN <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Fuss_IN, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb72-198"><a href="#cb72-198" aria-hidden="true" tabindex="-1"></a>depo<span class="sc">$</span>Fuss_OUT <span class="ot">&lt;-</span> <span class="fu">round</span>(depo<span class="sc">$</span>Fuss_OUT, <span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb72-199"><a href="#cb72-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-200"><a href="#cb72-200" aria-hidden="true" tabindex="-1"></a><span class="co"># 2.3 Aggregierung der Stundendaten zu ganzen Tagen ####</span></span>
<span id="cb72-201"><a href="#cb72-201" aria-hidden="true" tabindex="-1"></a><span class="co"># Zur Berechnung von Kennwerten ist es hilfreich, wenn neben den Stundendaten auch auf Ganztagesdaten</span></span>
<span id="cb72-202"><a href="#cb72-202" aria-hidden="true" tabindex="-1"></a><span class="co"># zurueckgegriffen werden kann</span></span>
<span id="cb72-203"><a href="#cb72-203" aria-hidden="true" tabindex="-1"></a><span class="co"># hier werden also pro Nutzergruppe und Richtung die Stundenwerte pro Tag aufsummiert</span></span>
<span id="cb72-204"><a href="#cb72-204" aria-hidden="true" tabindex="-1"></a>depo_d <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb72-205"><a href="#cb72-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Datum, Wochentag, Wochenende, KW, Monat, Jahr, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb72-206"><a href="#cb72-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Fuss_IN <span class="sc">+</span> Fuss_OUT), </span>
<span id="cb72-207"><a href="#cb72-207" aria-hidden="true" tabindex="-1"></a>            <span class="at">Fuss_IN =</span> <span class="fu">sum</span>(Fuss_IN),</span>
<span id="cb72-208"><a href="#cb72-208" aria-hidden="true" tabindex="-1"></a>            <span class="at">Fuss_OUT =</span> <span class="fu">sum</span>(Fuss_OUT)) </span>
<span id="cb72-209"><a href="#cb72-209" aria-hidden="true" tabindex="-1"></a><span class="co"># Wenn man die Convinience Variablen als grouping variable einspeisst, dann werden sie in </span></span>
<span id="cb72-210"><a href="#cb72-210" aria-hidden="true" tabindex="-1"></a><span class="co"># das neue df uebernommen und muessen nicht nochmals hinzugefuegt werden</span></span>
<span id="cb72-211"><a href="#cb72-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-212"><a href="#cb72-212" aria-hidden="true" tabindex="-1"></a><span class="co"># pruefe das df</span></span>
<span id="cb72-213"><a href="#cb72-213" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(depo_d)</span>
<span id="cb72-214"><a href="#cb72-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-215"><a href="#cb72-215" aria-hidden="true" tabindex="-1"></a><span class="co"># Gruppiere die Werte nach Monat</span></span>
<span id="cb72-216"><a href="#cb72-216" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb72-217"><a href="#cb72-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Jahr, Monat) <span class="sc">%&gt;%</span> </span>
<span id="cb72-218"><a href="#cb72-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total)) </span>
<span id="cb72-219"><a href="#cb72-219" aria-hidden="true" tabindex="-1"></a><span class="co"># sortiere das df aufsteigend (nur das es sicher stimmt)</span></span>
<span id="cb72-220"><a href="#cb72-220" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(depo_m)</span>
<span id="cb72-221"><a href="#cb72-221" aria-hidden="true" tabindex="-1"></a>depo_m[</span>
<span id="cb72-222"><a href="#cb72-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">with</span>(depo_m, <span class="fu">order</span>(Jahr, Monat)),]</span>
<span id="cb72-223"><a href="#cb72-223" aria-hidden="true" tabindex="-1"></a><span class="co"># mache dann aus Jahr und Monat faktoren</span></span>
<span id="cb72-224"><a href="#cb72-224" aria-hidden="true" tabindex="-1"></a>depo_m <span class="ot">&lt;-</span> depo_m <span class="sc">%&gt;%</span> </span>
<span id="cb72-225"><a href="#cb72-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Jahr =</span> <span class="fu">as.factor</span>(Jahr)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-226"><a href="#cb72-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Monat =</span> <span class="fu">as.factor</span>(Monat)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-227"><a href="#cb72-227" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ym =</span> <span class="fu">paste</span>(Jahr, Monat)) <span class="sc">%&gt;%</span> <span class="co"># und mache eine neue Spalte, in der Jahr und</span></span>
<span id="cb72-228"><a href="#cb72-228" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ym=</span> <span class="fu">factor</span>(Ym, <span class="at">levels=</span><span class="fu">unique</span>(Ym))) <span class="co"># Monat in zusammen sind</span></span>
<span id="cb72-229"><a href="#cb72-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-230"><a href="#cb72-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-231"><a href="#cb72-231" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-232"><a href="#cb72-232" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. DESKRIPTIVE ANALYSE UND VISUALISIERUNG #####</span></span>
<span id="cb72-233"><a href="#cb72-233" aria-hidden="true" tabindex="-1"></a><span class="co">#.################################################################################################</span></span>
<span id="cb72-234"><a href="#cb72-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-235"><a href="#cb72-235" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.1 Verlauf der Besuchszahlen / m ####</span></span>
<span id="cb72-236"><a href="#cb72-236" aria-hidden="true" tabindex="-1"></a><span class="co"># Monatliche Summen am Standort</span></span>
<span id="cb72-237"><a href="#cb72-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-238"><a href="#cb72-238" aria-hidden="true" tabindex="-1"></a><span class="co"># wann beginnt die Datenreihe schon wieder?</span></span>
<span id="cb72-239"><a href="#cb72-239" aria-hidden="true" tabindex="-1"></a><span class="fu">first</span>(depo_m<span class="sc">$</span>Ym)</span>
<span id="cb72-240"><a href="#cb72-240" aria-hidden="true" tabindex="-1"></a><span class="co"># und wann ist die fertig?</span></span>
<span id="cb72-241"><a href="#cb72-241" aria-hidden="true" tabindex="-1"></a><span class="fu">last</span>(depo_m<span class="sc">$</span>Ym)</span>
<span id="cb72-242"><a href="#cb72-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-243"><a href="#cb72-243" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotte</span></span>
<span id="cb72-244"><a href="#cb72-244" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(depo_m, <span class="at">mapping =</span> <span class="fu">aes</span>(Ym, Total, <span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span> <span class="co"># group 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird</span></span>
<span id="cb72-245"><a href="#cb72-245" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 1</span></span>
<span id="cb72-246"><a href="#cb72-246" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 3"</span>, <span class="at">xmax=</span><span class="st">"2020 5"</span>,</span>
<span id="cb72-247"><a href="#cb72-247" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))),</span>
<span id="cb72-248"><a href="#cb72-248" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb72-249"><a href="#cb72-249" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 2</span></span>
<span id="cb72-250"><a href="#cb72-250" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 12"</span>, <span class="at">xmax=</span><span class="st">"2021 3"</span>, </span>
<span id="cb72-251"><a href="#cb72-251" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))), </span>
<span id="cb72-252"><a href="#cb72-252" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb72-253"><a href="#cb72-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb72-254"><a href="#cb72-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>),</span>
<span id="cb72-255"><a href="#cb72-255" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>))<span class="sc">+</span></span>
<span id="cb72-256"><a href="#cb72-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span> <span class="st">""</span>, <span class="at">y=</span><span class="st">"Fuss pro Monat"</span>, <span class="at">x =</span> <span class="st">"Jahr"</span>)<span class="sc">+</span></span>
<span id="cb72-257"><a href="#cb72-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-258"><a href="#cb72-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb72-259"><a href="#cb72-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-260"><a href="#cb72-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-261"><a href="#cb72-261" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.2 Wochengang ####</span></span>
<span id="cb72-262"><a href="#cb72-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-263"><a href="#cb72-263" aria-hidden="true" tabindex="-1"></a><span class="co"># mean / d / phase</span></span>
<span id="cb72-264"><a href="#cb72-264" aria-hidden="true" tabindex="-1"></a>mean_phase_wd <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-265"><a href="#cb72-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Wochentag, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb72-266"><a href="#cb72-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total))</span>
<span id="cb72-267"><a href="#cb72-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-268"><a href="#cb72-268" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb72-269"><a href="#cb72-269" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_d)<span class="sc">+</span></span>
<span id="cb72-270"><a href="#cb72-270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span> Wochentag, <span class="at">y =</span> Total, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-271"><a href="#cb72-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>, <span class="at">y=</span> <span class="st">"Anzahl pro Tag"</span>)<span class="sc">+</span></span>
<span id="cb72-272"><a href="#cb72-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>))<span class="sc">+</span></span>
<span id="cb72-273"><a href="#cb72-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-274"><a href="#cb72-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb72-275"><a href="#cb72-275" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb72-276"><a href="#cb72-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-277"><a href="#cb72-277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-278"><a href="#cb72-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-281"><a href="#cb72-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb72-282"><a href="#cb72-282" aria-hidden="true" tabindex="-1"></a><span class="co"># Statistik: Unterschied WE und WO während Lockdown 1</span></span>
<span id="cb72-283"><a href="#cb72-283" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(depo_d<span class="sc">$</span>Total[depo_d<span class="sc">$</span>Phase <span class="sc">==</span> <span class="st">"Lockdown_1"</span> <span class="sc">&amp;</span> depo_d<span class="sc">$</span>Wochenende<span class="sc">==</span><span class="st">"Werktag"</span>], </span>
<span id="cb72-284"><a href="#cb72-284" aria-hidden="true" tabindex="-1"></a>       depo_d<span class="sc">$</span>Total [depo_d<span class="sc">$</span>Phase <span class="sc">==</span> <span class="st">"Lockdown_1"</span> <span class="sc">&amp;</span> depo_d<span class="sc">$</span>Wochenende<span class="sc">==</span><span class="st">"Wochenende"</span>])</span>
<span id="cb72-285"><a href="#cb72-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-286"><a href="#cb72-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span> </span>
<span id="cb72-287"><a href="#cb72-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-290"><a href="#cb72-290" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb72-291"><a href="#cb72-291" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.3 Tagesgang ####</span></span>
<span id="cb72-292"><a href="#cb72-292" aria-hidden="true" tabindex="-1"></a><span class="co"># Bei diesen Berechnungen wird jeweils der Mittelwert pro Stunde berechnet. </span></span>
<span id="cb72-293"><a href="#cb72-293" aria-hidden="true" tabindex="-1"></a><span class="co"># wiederum nutzen wir dafuer "pipes"</span></span>
<span id="cb72-294"><a href="#cb72-294" aria-hidden="true" tabindex="-1"></a>Mean_h <span class="ot">&lt;-</span> depo <span class="sc">%&gt;%</span> </span>
<span id="cb72-295"><a href="#cb72-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Wochentag, Stunde, Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb72-296"><a href="#cb72-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total)) </span>
<span id="cb72-297"><a href="#cb72-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-298"><a href="#cb72-298" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb72-299"><a href="#cb72-299" aria-hidden="true" tabindex="-1"></a>Mean_h<span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(Mean_h,<span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"Total"</span>),</span>
<span id="cb72-300"><a href="#cb72-300" aria-hidden="true" tabindex="-1"></a>                             <span class="at">value.name =</span> <span class="st">"Total"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span>
<span id="cb72-301"><a href="#cb72-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-302"><a href="#cb72-302" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotte den Tagesgang, unterteilt nach Wochentagen</span></span>
<span id="cb72-303"><a href="#cb72-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-304"><a href="#cb72-304" aria-hidden="true" tabindex="-1"></a><span class="co"># Normal</span></span>
<span id="cb72-305"><a href="#cb72-305" aria-hidden="true" tabindex="-1"></a>tag_norm <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Normal"</span>)), </span>
<span id="cb72-306"><a href="#cb72-306" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-307"><a href="#cb72-307" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb72-308"><a href="#cb72-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb72-309"><a href="#cb72-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>),  <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb72-310"><a href="#cb72-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb72-311"><a href="#cb72-311" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb72-312"><a href="#cb72-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb72-313"><a href="#cb72-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-314"><a href="#cb72-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb72-315"><a href="#cb72-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-316"><a href="#cb72-316" aria-hidden="true" tabindex="-1"></a><span class="co"># Lockdown 1</span></span>
<span id="cb72-317"><a href="#cb72-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-318"><a href="#cb72-318" aria-hidden="true" tabindex="-1"></a>tag_lock_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lockdown_1"</span>)), </span>
<span id="cb72-319"><a href="#cb72-319" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-320"><a href="#cb72-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb72-321"><a href="#cb72-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb72-322"><a href="#cb72-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb72-323"><a href="#cb72-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb72-324"><a href="#cb72-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb72-325"><a href="#cb72-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb72-326"><a href="#cb72-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-327"><a href="#cb72-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb72-328"><a href="#cb72-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-329"><a href="#cb72-329" aria-hidden="true" tabindex="-1"></a><span class="co"># Lockdown 2</span></span>
<span id="cb72-330"><a href="#cb72-330" aria-hidden="true" tabindex="-1"></a>tag_lock_2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Lockdown_2"</span>)), </span>
<span id="cb72-331"><a href="#cb72-331" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-332"><a href="#cb72-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb72-333"><a href="#cb72-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb72-334"><a href="#cb72-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb72-335"><a href="#cb72-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb72-336"><a href="#cb72-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb72-337"><a href="#cb72-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb72-338"><a href="#cb72-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-339"><a href="#cb72-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb72-340"><a href="#cb72-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-341"><a href="#cb72-341" aria-hidden="true" tabindex="-1"></a><span class="co"># Covid</span></span>
<span id="cb72-342"><a href="#cb72-342" aria-hidden="true" tabindex="-1"></a>tag_covid <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Covid"</span>)), </span>
<span id="cb72-343"><a href="#cb72-343" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-344"><a href="#cb72-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb72-345"><a href="#cb72-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb72-346"><a href="#cb72-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>), <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb72-347"><a href="#cb72-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb72-348"><a href="#cb72-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb72-349"><a href="#cb72-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb72-350"><a href="#cb72-350" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-351"><a href="#cb72-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb72-352"><a href="#cb72-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-353"><a href="#cb72-353" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Tagesgang</span></span>
<span id="cb72-354"><a href="#cb72-354" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(tag_lock_1<span class="sc">+</span>            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb72-355"><a href="#cb72-355" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span>   <span class="co"># plot 1 braucht es nicht alle Achsenbeschriftungen</span></span>
<span id="cb72-356"><a href="#cb72-356" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),            </span>
<span id="cb72-357"><a href="#cb72-357" aria-hidden="true" tabindex="-1"></a>          tag_lock_2<span class="sc">+</span>            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb72-358"><a href="#cb72-358" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   <span class="co"># bei plot 2 brauchen wir keine Achsenbeschriftung</span></span>
<span id="cb72-359"><a href="#cb72-359" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>)<span class="sc">+</span></span>
<span id="cb72-360"><a href="#cb72-360" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span></span>
<span id="cb72-361"><a href="#cb72-361" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),</span>
<span id="cb72-362"><a href="#cb72-362" aria-hidden="true" tabindex="-1"></a>          tag_norm,</span>
<span id="cb72-363"><a href="#cb72-363" aria-hidden="true" tabindex="-1"></a>          tag_covid<span class="sc">+</span></span>
<span id="cb72-364"><a href="#cb72-364" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   </span>
<span id="cb72-365"><a href="#cb72-365" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>),</span>
<span id="cb72-366"><a href="#cb72-366" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb72-367"><a href="#cb72-367" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="dv">1</span>),  <span class="co"># beide plots sind wegen der fehlenden Beschriftung nicht gleich hoch</span></span>
<span id="cb72-368"><a href="#cb72-368" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.9</span>),    </span>
<span id="cb72-369"><a href="#cb72-369" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Lockdown 1"</span>, <span class="st">"b) Lockdown 2"</span>, <span class="st">"c) Normal"</span>, <span class="st">"d) Covid"</span>),</span>
<span id="cb72-370"><a href="#cb72-370" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="fl">0.1</span>,        <span class="co"># wo stehen die Plottitel</span></span>
<span id="cb72-371"><a href="#cb72-371" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">0.99</span>,</span>
<span id="cb72-372"><a href="#cb72-372" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span>
<span id="cb72-373"><a href="#cb72-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-374"><a href="#cb72-374" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.4 Kennzahlen ####</span></span>
<span id="cb72-375"><a href="#cb72-375" aria-hidden="true" tabindex="-1"></a>total_phase <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-376"><a href="#cb72-376" aria-hidden="true" tabindex="-1"></a>  <span class="co"># gruppiere nach Phasen inkl. Normal. Diese Levels haben wir bereits definiert</span></span>
<span id="cb72-377"><a href="#cb72-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb72-378"><a href="#cb72-378" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Total),</span>
<span id="cb72-379"><a href="#cb72-379" aria-hidden="true" tabindex="-1"></a>            <span class="at">IN =</span> <span class="fu">sum</span>(Fuss_IN),</span>
<span id="cb72-380"><a href="#cb72-380" aria-hidden="true" tabindex="-1"></a>            <span class="at">OUT =</span> <span class="fu">sum</span>(Fuss_OUT))</span>
<span id="cb72-381"><a href="#cb72-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-382"><a href="#cb72-382" aria-hidden="true" tabindex="-1"></a><span class="co"># mean besser Vergleichbar, da Zeitreihen unterschiedlich lange</span></span>
<span id="cb72-383"><a href="#cb72-383" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-384"><a href="#cb72-384" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Phase) <span class="sc">%&gt;%</span> </span>
<span id="cb72-385"><a href="#cb72-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">mean</span>(Total),</span>
<span id="cb72-386"><a href="#cb72-386" aria-hidden="true" tabindex="-1"></a>            <span class="at">IN =</span> <span class="fu">mean</span>(Fuss_IN),</span>
<span id="cb72-387"><a href="#cb72-387" aria-hidden="true" tabindex="-1"></a>            <span class="at">OUT =</span> <span class="fu">mean</span>(Fuss_OUT))</span>
<span id="cb72-388"><a href="#cb72-388" aria-hidden="true" tabindex="-1"></a><span class="co"># berechne prozentuale Richtungsverteilung</span></span>
<span id="cb72-389"><a href="#cb72-389" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-390"><a href="#cb72-390" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_IN =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>IN, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="co"># berechnen und auf eine Nachkommastelle runden</span></span>
<span id="cb72-391"><a href="#cb72-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_OUT =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>OUT,<span class="dv">1</span>))</span>
<span id="cb72-392"><a href="#cb72-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-393"><a href="#cb72-393" aria-hidden="true" tabindex="-1"></a><span class="co"># selektiere absolute Zahlen</span></span>
<span id="cb72-394"><a href="#cb72-394" aria-hidden="true" tabindex="-1"></a><span class="co"># behalte rel. Spalten (nur die relativen Prozentangaben)</span></span>
<span id="cb72-395"><a href="#cb72-395" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> mean_phase_d[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">6</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb72-396"><a href="#cb72-396" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb72-397"><a href="#cb72-397" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(mean_phase_d_abs, </span>
<span id="cb72-398"><a href="#cb72-398" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"IN"</span>,<span class="st">"OUT"</span>),</span>
<span id="cb72-399"><a href="#cb72-399" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">value.name =</span> <span class="st">"Durchschnitt"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span>
<span id="cb72-400"><a href="#cb72-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-401"><a href="#cb72-401" aria-hidden="true" tabindex="-1"></a><span class="co"># selektiere relative Zahlen</span></span>
<span id="cb72-402"><a href="#cb72-402" aria-hidden="true" tabindex="-1"></a><span class="co"># behalte rel. Spalten (nur die relativen Prozentangaben)</span></span>
<span id="cb72-403"><a href="#cb72-403" aria-hidden="true" tabindex="-1"></a>mean_phase_d_proz <span class="ot">&lt;-</span> mean_phase_d[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>), drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb72-404"><a href="#cb72-404" aria-hidden="true" tabindex="-1"></a><span class="co"># transformiere fuer Plotting</span></span>
<span id="cb72-405"><a href="#cb72-405" aria-hidden="true" tabindex="-1"></a>mean_phase_d_proz <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(mean_phase_d_proz, </span>
<span id="cb72-406"><a href="#cb72-406" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">measure.vars =</span> <span class="fu">c</span>(<span class="st">"Proz_IN"</span>,<span class="st">"Proz_OUT"</span>),</span>
<span id="cb72-407"><a href="#cb72-407" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">value.name =</span> <span class="st">"Durchschnitt"</span>,<span class="at">variable.name =</span> <span class="st">"Gruppe"</span>)</span>
<span id="cb72-408"><a href="#cb72-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-409"><a href="#cb72-409" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisierung abs</span></span>
<span id="cb72-410"><a href="#cb72-410" aria-hidden="true" tabindex="-1"></a>abs <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_abs, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-411"><a href="#cb72-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb72-412"><a href="#cb72-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb72-413"><a href="#cb72-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb72-414"><a href="#cb72-414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [mean]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb72-415"><a href="#cb72-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-416"><a href="#cb72-416" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb72-417"><a href="#cb72-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-418"><a href="#cb72-418" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisierung %</span></span>
<span id="cb72-419"><a href="#cb72-419" aria-hidden="true" tabindex="-1"></a>proz <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_proz, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-420"><a href="#cb72-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb72-421"><a href="#cb72-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb72-422"><a href="#cb72-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb72-423"><a href="#cb72-423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [%]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb72-424"><a href="#cb72-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-425"><a href="#cb72-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb72-426"><a href="#cb72-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-427"><a href="#cb72-427" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Verteilung</span></span>
<span id="cb72-428"><a href="#cb72-428" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(abs,            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb72-429"><a href="#cb72-429" aria-hidden="true" tabindex="-1"></a>          proz,            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb72-430"><a href="#cb72-430" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">1</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb72-431"><a href="#cb72-431" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">1</span>),        <span class="co"># beide sind bleich hoch</span></span>
<span id="cb72-432"><a href="#cb72-432" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.95</span>),    <span class="co"># plot 2 ist aufgrund der fehlenden y-achsenbesch. etwas schmaler</span></span>
<span id="cb72-433"><a href="#cb72-433" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Absolute Verteilung"</span>, <span class="st">"b) Relative Verteilung"</span>),</span>
<span id="cb72-434"><a href="#cb72-434" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="dv">0</span>,        <span class="co"># wo stehen die labels</span></span>
<span id="cb72-435"><a href="#cb72-435" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">1.0</span>,</span>
<span id="cb72-436"><a href="#cb72-436" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span>
<span id="cb72-437"><a href="#cb72-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-438"><a href="#cb72-438" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-439"><a href="#cb72-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-440"><a href="#cb72-440" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aufgabe 1: Verlauf der Besuchszahlen / m</span></span>
<span id="cb72-441"><a href="#cb72-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-442"><a href="#cb72-442" aria-hidden="true" tabindex="-1"></a>Nachdem wir die Projektstruktur aufgebaut haben und die Daten vorbereitet sind, machen wir uns an die deskriptive Analyse. Dies macht eigentlich immer Sinn. Bevor mach sich an die schliessende Statistik macht, muss man ein "Gefühl" für die Daten bekommen. Dies funktioniert am einfachsten mit deskriptiven, explorativen Analysen.</span>
<span id="cb72-443"><a href="#cb72-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-444"><a href="#cb72-444" aria-hidden="true" tabindex="-1"></a>Wir interessieren uns in den Analysen grundsätzlich für 4 Zeitabschnitte:</span>
<span id="cb72-445"><a href="#cb72-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-446"><a href="#cb72-446" aria-hidden="true" tabindex="-1"></a>1) Normal (vom Start der Erhebungen bis vor dem ersten Lockdown)</span>
<span id="cb72-447"><a href="#cb72-447" aria-hidden="true" tabindex="-1"></a>2) Lockdown 1</span>
<span id="cb72-448"><a href="#cb72-448" aria-hidden="true" tabindex="-1"></a>3) Lockdown 2</span>
<span id="cb72-449"><a href="#cb72-449" aria-hidden="true" tabindex="-1"></a>4) Seit Covid, aber nicht während eines Lockdowns</span>
<span id="cb72-450"><a href="#cb72-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-451"><a href="#cb72-451" aria-hidden="true" tabindex="-1"></a>Wir haben relativ lange Zeitreihen. Zur Visualisierung des generellen Trends greifen wir darum auf die aggregierten Daten zurück - das macht den Plot übersichtlicher und damit aussagekräftiger.</span>
<span id="cb72-452"><a href="#cb72-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-453"><a href="#cb72-453" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plottet den Verlauf der monatlichen Besuchszahlen an eurer Zählstelle. Auf der x-Achse steht dabei dabei Jahr und Monat (gespeichert im df _depo_m_), auf der y-Achse die monatlichen Besuchszahlen. Zeichnet auch die beiden Lockdown ein (Hinweis: rundet das Start- und Enddatum des Lockdowns auf den Monat, da im Plot die monatlichen Zahlen gezeigt werden).</span>
<span id="cb72-454"><a href="#cb72-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-455"><a href="#cb72-455" aria-hidden="true" tabindex="-1"></a>Haltet euch dabei an untenstehenden Plot:</span>
<span id="cb72-456"><a href="#cb72-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-457"><a href="#cb72-457" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F}</span></span>
<span id="cb72-458"><a href="#cb72-458" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(depo_m, <span class="at">mapping =</span> <span class="fu">aes</span>(Ym, Total, <span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span> <span class="co"># group 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird</span></span>
<span id="cb72-459"><a href="#cb72-459" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 1</span></span>
<span id="cb72-460"><a href="#cb72-460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 3"</span>, <span class="at">xmax=</span><span class="st">"2020 5"</span>,</span>
<span id="cb72-461"><a href="#cb72-461" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))),</span>
<span id="cb72-462"><a href="#cb72-462" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb72-463"><a href="#cb72-463" aria-hidden="true" tabindex="-1"></a>  <span class="co">#zeichne Lockdown 2</span></span>
<span id="cb72-464"><a href="#cb72-464" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 12"</span>, <span class="at">xmax=</span><span class="st">"2021 3"</span>, </span>
<span id="cb72-465"><a href="#cb72-465" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))), </span>
<span id="cb72-466"><a href="#cb72-466" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb72-467"><a href="#cb72-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="fl">1.5</span>)<span class="sc">+</span></span>
<span id="cb72-468"><a href="#cb72-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>),</span>
<span id="cb72-469"><a href="#cb72-469" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"2019 1"</span>, <span class="st">"2019 7"</span>,<span class="st">"2019 1"</span>,<span class="st">"2020 1"</span>,<span class="st">"2020 7"</span>,<span class="st">"2021 1"</span>,<span class="st">"2021 7"</span>))<span class="sc">+</span></span>
<span id="cb72-470"><a href="#cb72-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span> <span class="st">""</span>, <span class="at">y=</span><span class="st">"Fussgänger:innen pro Monat"</span>, <span class="at">x =</span> <span class="st">"Jahr"</span>)<span class="sc">+</span></span>
<span id="cb72-471"><a href="#cb72-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-472"><a href="#cb72-472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span>
<span id="cb72-473"><a href="#cb72-473" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-474"><a href="#cb72-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-475"><a href="#cb72-475" aria-hidden="true" tabindex="-1"></a>__Hinweis:__ </span>
<span id="cb72-476"><a href="#cb72-476" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Nutzt zum plotten __ggplot()__</span>
<span id="cb72-477"><a href="#cb72-477" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>folgende Codeschnipsel helfen euch:</span>
<span id="cb72-478"><a href="#cb72-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-479"><a href="#cb72-479" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = F}</span></span>
<span id="cb72-480"><a href="#cb72-480" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_m, <span class="at">mapping =</span> <span class="fu">aes</span>(Ym, Total, <span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span> <span class="co"># group 1 braucht R, dass aus den Einzelpunkten ein Zusammenhang hergestellt wird</span></span>
<span id="cb72-481"><a href="#cb72-481" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne Lockdown 1; ein einfaches Rechteck. bestimme mit min und max die Dimensionen</span></span>
<span id="cb72-482"><a href="#cb72-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">xmin=</span><span class="st">"2020 3"</span>, <span class="at">xmax=</span><span class="st">"2020 5"</span>,</span>
<span id="cb72-483"><a href="#cb72-483" aria-hidden="true" tabindex="-1"></a>                          <span class="at">ymin =</span><span class="dv">0</span>, <span class="at">ymax=</span><span class="fu">max</span>(Total<span class="sc">+</span>(Total<span class="sc">/</span><span class="dv">100</span><span class="sc">*</span><span class="dv">10</span>))), <span class="co"># das Rechteck soll 10 % grösser als die maximale Besuchszahl sein </span></span>
<span id="cb72-484"><a href="#cb72-484" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"lightskyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb72-485"><a href="#cb72-485" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne Lockdown 2</span></span>
<span id="cb72-486"><a href="#cb72-486" aria-hidden="true" tabindex="-1"></a>    ...<span class="sc">+</span></span>
<span id="cb72-487"><a href="#cb72-487" aria-hidden="true" tabindex="-1"></a>  <span class="co"># zeichne die Linie</span></span>
<span id="cb72-488"><a href="#cb72-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(...)<span class="sc">+</span></span>
<span id="cb72-489"><a href="#cb72-489" aria-hidden="true" tabindex="-1"></a>  <span class="co"># bestimme manuell, wo auf der x-Achse die breaks sind und wie diese angeschrieben werden sollen</span></span>
<span id="cb72-490"><a href="#cb72-490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="st">"..."</span>, <span class="st">"..."</span>, ...),</span>
<span id="cb72-491"><a href="#cb72-491" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"..."</span>, <span class="st">"..."</span>, ...))<span class="sc">+</span></span>
<span id="cb72-492"><a href="#cb72-492" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-493"><a href="#cb72-493" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb72-494"><a href="#cb72-494" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-495"><a href="#cb72-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-496"><a href="#cb72-496" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Exportiert euren Plot mit __ggsave()__ nach __results__. Breite = 20, Höhe = 10, Einheiten = cm, dpi = 1000</span>
<span id="cb72-497"><a href="#cb72-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-498"><a href="#cb72-498" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aufgabe 2: Wochengang</span></span>
<span id="cb72-499"><a href="#cb72-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-500"><a href="#cb72-500" aria-hidden="true" tabindex="-1"></a>Nachdem wir nun wissen, wie sich die Besuchszahlen während der Untersuchungsdauer monatlich entwickelt haben, möchten wir genauer untersuchen, wie sich die Zahlen je nach Phase (Normal, Lockdown 1. Lockdown 2 und Covid) auf die Wochentage verteilen. </span>
<span id="cb72-501"><a href="#cb72-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-502"><a href="#cb72-502" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2a)</span></span>
<span id="cb72-503"><a href="#cb72-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-504"><a href="#cb72-504" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Berechnet zuerst die Totale Anzahl pro Wochentag pro Phase.</span>
<span id="cb72-505"><a href="#cb72-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-506"><a href="#cb72-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-507"><a href="#cb72-507" aria-hidden="true" tabindex="-1"></a>mean_phase_wd <span class="ot">&lt;-</span> depo_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-508"><a href="#cb72-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(...) <span class="sc">%&gt;%</span> </span>
<span id="cb72-509"><a href="#cb72-509" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb72-510"><a href="#cb72-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-511"><a href="#cb72-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-512"><a href="#cb72-512" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Speichert das als .csv</span>
<span id="cb72-513"><a href="#cb72-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-514"><a href="#cb72-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-515"><a href="#cb72-515" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mean_phase_wd, <span class="st">"results/mean_phase_wd.csv"</span>)</span>
<span id="cb72-516"><a href="#cb72-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-517"><a href="#cb72-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-518"><a href="#cb72-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2b)</span></span>
<span id="cb72-519"><a href="#cb72-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-520"><a href="#cb72-520" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Erstellt einen Boxplot nach untenstehender Vorgabe:</span>
<span id="cb72-521"><a href="#cb72-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-522"><a href="#cb72-522" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=F}</span></span>
<span id="cb72-523"><a href="#cb72-523" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_d)<span class="sc">+</span></span>
<span id="cb72-524"><a href="#cb72-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span> Wochentag, <span class="at">y =</span> Total, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-525"><a href="#cb72-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>, <span class="at">y=</span> <span class="st">"Fussgänger:innen pro Tag"</span>)<span class="sc">+</span></span>
<span id="cb72-526"><a href="#cb72-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>))<span class="sc">+</span></span>
<span id="cb72-527"><a href="#cb72-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-528"><a href="#cb72-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb72-529"><a href="#cb72-529" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span>
<span id="cb72-530"><a href="#cb72-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-531"><a href="#cb72-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-532"><a href="#cb72-532" aria-hidden="true" tabindex="-1"></a>__Hinweis:__ </span>
<span id="cb72-533"><a href="#cb72-533" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Nutzt zum plotten __ggplot()__</span>
<span id="cb72-534"><a href="#cb72-534" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>folgende Codeschnipsel helfen euch:</span>
<span id="cb72-535"><a href="#cb72-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-536"><a href="#cb72-536" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = FALSE}</span></span>
<span id="cb72-537"><a href="#cb72-537" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> depo_d)<span class="sc">+</span></span>
<span id="cb72-538"><a href="#cb72-538" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span> Wochentag, <span class="at">y =</span> Total, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-539"><a href="#cb72-539" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb72-540"><a href="#cb72-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-541"><a href="#cb72-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-542"><a href="#cb72-542" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Exportiert auch diesen Plot mit __ggsave()__. Welche Breite und Höhe passt hier?</span>
<span id="cb72-543"><a href="#cb72-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-544"><a href="#cb72-544" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2c)</span></span>
<span id="cb72-545"><a href="#cb72-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-546"><a href="#cb72-546" aria-hidden="true" tabindex="-1"></a>Sind die Unterschiede zwischen Werktag und Wochenende wirklich signifikant? Falls ja, in allen Phasen oder nur während bestimmter?</span>
<span id="cb72-547"><a href="#cb72-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-548"><a href="#cb72-548" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Prüft das pro Phase mit einem einfachen t.test.</span>
<span id="cb72-549"><a href="#cb72-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-550"><a href="#cb72-550" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aufgabe 3: Tagesgang</span></span>
<span id="cb72-551"><a href="#cb72-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-552"><a href="#cb72-552" aria-hidden="true" tabindex="-1"></a>Vom Grossen zum Kleinen, von der Übersicht ins Detail. Jetzt widmen wir uns dem Tagesgang, das heisst der Verteilung der Besuchenden auf die 24 Tagesstunden je nach Phase.</span>
<span id="cb72-553"><a href="#cb72-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-554"><a href="#cb72-554" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3a)</span></span>
<span id="cb72-555"><a href="#cb72-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-556"><a href="#cb72-556" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Berechnet zuerst den Mittelwert der Totalen Besuchszahlen pro Wochentag pro Stunde pro Phase. (ganz ähnlich wie unter 2a) und speichert das df unter __Mean_h__.</span>
<span id="cb72-557"><a href="#cb72-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-558"><a href="#cb72-558" aria-hidden="true" tabindex="-1"></a>ggplots haben Daten lieber im Format long als wide. </span>
<span id="cb72-559"><a href="#cb72-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-560"><a href="#cb72-560" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3b)</span></span>
<span id="cb72-561"><a href="#cb72-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-562"><a href="#cb72-562" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Plottet den Tagesgang, unterteilt nach den 7 Wochentagen nun für unsere 4 Phasen.</span>
<span id="cb72-563"><a href="#cb72-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-564"><a href="#cb72-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=F} </span></span>
<span id="cb72-565"><a href="#cb72-565" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Normal"</span>)), </span>
<span id="cb72-566"><a href="#cb72-566" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-567"><a href="#cb72-567" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb72-568"><a href="#cb72-568" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb72-569"><a href="#cb72-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"solid"</span>, <span class="dv">5</span>),  <span class="st">"twodash"</span>, <span class="st">"twodash"</span>))<span class="sc">+</span></span>
<span id="cb72-570"><a href="#cb72-570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">23</span>, <span class="at">by =</span> <span class="dv">2</span>)))<span class="sc">+</span></span>
<span id="cb72-571"><a href="#cb72-571" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Uhrzeit [h]"</span>, <span class="at">y=</span> <span class="st">"∅ Fussganger_Innen / h"</span>, <span class="at">title =</span> <span class="st">""</span>)<span class="sc">+</span></span>
<span id="cb72-572"><a href="#cb72-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>))<span class="sc">+</span></span>
<span id="cb72-573"><a href="#cb72-573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-574"><a href="#cb72-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span>
<span id="cb72-575"><a href="#cb72-575" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-576"><a href="#cb72-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-577"><a href="#cb72-577" aria-hidden="true" tabindex="-1"></a>Für die Phase "Normal" benutze ich folgenden Codeschnipsel. Speichert den Plot ab (hier: __tag_norm__).</span>
<span id="cb72-578"><a href="#cb72-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-579"><a href="#cb72-579" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-580"><a href="#cb72-580" aria-hidden="true" tabindex="-1"></a>tag_norm <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">subset</span>(Mean_h, Phase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Normal"</span>)), </span>
<span id="cb72-581"><a href="#cb72-581" aria-hidden="true" tabindex="-1"></a>                     <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x =</span> Stunde, <span class="at">y =</span> Total, <span class="at">colour =</span> Wochentag, <span class="at">linetype =</span> Wochentag))<span class="sc">+</span></span>
<span id="cb72-582"><a href="#cb72-582" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb72-583"><a href="#cb72-583" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-584"><a href="#cb72-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-585"><a href="#cb72-585" aria-hidden="true" tabindex="-1"></a>__Hinweis:__ Achtet darauf, dass die Skalierung der y-Achse bei allen 4 Plots dieselbe ist (z.B. immer vom 0 bis 25). </span>
<span id="cb72-586"><a href="#cb72-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-587"><a href="#cb72-587" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3c)</span></span>
<span id="cb72-588"><a href="#cb72-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-589"><a href="#cb72-589" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Arrangiert die vier erstellten Plots und speichert das Resultat. Das ist etwas tricky, darum hier der vollständige Code.</span>
<span id="cb72-590"><a href="#cb72-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-591"><a href="#cb72-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-592"><a href="#cb72-592" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange und Export Tagesgang</span></span>
<span id="cb72-593"><a href="#cb72-593" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(tag_lock_1<span class="sc">+</span>            <span class="co"># plot 1 aufrufen</span></span>
<span id="cb72-594"><a href="#cb72-594" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span>   <span class="co"># plot 1 braucht es nicht alle Achsenbeschriftungen</span></span>
<span id="cb72-595"><a href="#cb72-595" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),            </span>
<span id="cb72-596"><a href="#cb72-596" aria-hidden="true" tabindex="-1"></a>          tag_lock_2<span class="sc">+</span>            <span class="co"># plot 2 aufrufen</span></span>
<span id="cb72-597"><a href="#cb72-597" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   <span class="co"># bei plot 2 brauchen wir keine Achsenbeschriftung</span></span>
<span id="cb72-598"><a href="#cb72-598" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>)<span class="sc">+</span></span>
<span id="cb72-599"><a href="#cb72-599" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.text"</span>)<span class="sc">+</span></span>
<span id="cb72-600"><a href="#cb72-600" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"x.title"</span>),</span>
<span id="cb72-601"><a href="#cb72-601" aria-hidden="true" tabindex="-1"></a>          tag_norm,</span>
<span id="cb72-602"><a href="#cb72-602" aria-hidden="true" tabindex="-1"></a>          tag_covid<span class="sc">+</span></span>
<span id="cb72-603"><a href="#cb72-603" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.text"</span>)<span class="sc">+</span>   </span>
<span id="cb72-604"><a href="#cb72-604" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rremove</span>(<span class="st">"y.title"</span>),</span>
<span id="cb72-605"><a href="#cb72-605" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">nrow =</span> <span class="dv">2</span>,    <span class="co"># definieren, wie die plots angeordnet werden</span></span>
<span id="cb72-606"><a href="#cb72-606" aria-hidden="true" tabindex="-1"></a>          <span class="at">heights =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="dv">1</span>),  <span class="co"># beide plots sind wegen der fehlenden Beschriftung nicht gleich hoch</span></span>
<span id="cb72-607"><a href="#cb72-607" aria-hidden="true" tabindex="-1"></a>          <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="fl">0.9</span>),    </span>
<span id="cb72-608"><a href="#cb72-608" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"a) Lockdown 1"</span>, <span class="st">"b) Lockdown 2"</span>, <span class="st">"c) Normal"</span>, <span class="st">"d) Covid"</span>),</span>
<span id="cb72-609"><a href="#cb72-609" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.x =</span> <span class="fl">0.1</span>,        <span class="co"># wo stehen die Plottitel</span></span>
<span id="cb72-610"><a href="#cb72-610" aria-hidden="true" tabindex="-1"></a>          <span class="at">label.y =</span> <span class="fl">0.99</span>,</span>
<span id="cb72-611"><a href="#cb72-611" aria-hidden="true" tabindex="-1"></a>          <span class="at">common.legend =</span> <span class="cn">TRUE</span>, <span class="at">legend =</span> <span class="st">"bottom"</span>) <span class="co"># wir brauchen nur eine Legende, unten</span></span>
<span id="cb72-612"><a href="#cb72-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-613"><a href="#cb72-613" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"Tagesgang.png"</span>, <span class="at">width=</span><span class="dv">25</span>, <span class="at">height=</span><span class="dv">25</span>, <span class="at">units=</span><span class="st">"cm"</span>, <span class="at">dpi=</span><span class="dv">1000</span>,</span>
<span id="cb72-614"><a href="#cb72-614" aria-hidden="true" tabindex="-1"></a>       <span class="at">path =</span> <span class="st">"results/"</span>)</span>
<span id="cb72-615"><a href="#cb72-615" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-616"><a href="#cb72-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-617"><a href="#cb72-617" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aufgabe 4: Kennzahlen</span></span>
<span id="cb72-618"><a href="#cb72-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-619"><a href="#cb72-619" aria-hidden="true" tabindex="-1"></a>Schliesslich berechnen wir noch einige Kennzahlen (Anzahl Passagen, Richtungsverteilung, ...).</span>
<span id="cb72-620"><a href="#cb72-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-621"><a href="#cb72-621" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4a)</span></span>
<span id="cb72-622"><a href="#cb72-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-623"><a href="#cb72-623" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Gruppiert nach Phase und berechnet dieses mal die Summe (nicht den Durchschnitt) Total, IN und OUT (ähnlich wie in 2a und 3a).</span>
<span id="cb72-624"><a href="#cb72-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-625"><a href="#cb72-625" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Speichert das Ergebnis als .csv</span>
<span id="cb72-626"><a href="#cb72-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-627"><a href="#cb72-627" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4b) </span></span>
<span id="cb72-628"><a href="#cb72-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-629"><a href="#cb72-629" aria-hidden="true" tabindex="-1"></a>Die Zeitreihen der 4 Phasen unterscheiden sich deutlich voneinander. Totale Summen sind da kaum miteinander vergleichbar, besser eignet sich der Durchschnitt oder der Median.</span>
<span id="cb72-630"><a href="#cb72-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-631"><a href="#cb72-631" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Gruppiert nach Phase und berechnet den Durchschnitt Total, IN und OUT und speichert das df unter __mean_phase_d__.</span>
<span id="cb72-632"><a href="#cb72-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-633"><a href="#cb72-633" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ergänzt das mit der prozentualen Richtungsverteilung</span>
<span id="cb72-634"><a href="#cb72-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-635"><a href="#cb72-635" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb72-636"><a href="#cb72-636" aria-hidden="true" tabindex="-1"></a>mean_phase_d <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> </span>
<span id="cb72-637"><a href="#cb72-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Proz_IN =</span> <span class="fu">round</span>(<span class="dv">100</span><span class="sc">/</span>Total<span class="sc">*</span>IN, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="co"># berechnen und auf eine Nachkommastelle runden</span></span>
<span id="cb72-638"><a href="#cb72-638" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb72-639"><a href="#cb72-639" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-640"><a href="#cb72-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-641"><a href="#cb72-641" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Speichert das Ergebnis als .csv</span>
<span id="cb72-642"><a href="#cb72-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-643"><a href="#cb72-643" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Selektiert nun die absoluten Zahlen im df __mean_phase_d__ sowie die relativen und speichert das jeweils in einem df __mean_phase_d_abs__ und __mean_phase_d_proz__.</span>
<span id="cb72-644"><a href="#cb72-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-645"><a href="#cb72-645" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-646"><a href="#cb72-646" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> mean_phase_d <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Total, Proz_IN, Proz_OUT))</span>
<span id="cb72-647"><a href="#cb72-647" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-648"><a href="#cb72-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-649"><a href="#cb72-649" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>transformiert beide df mittels __pivot_longer()__ von wide zu long:</span>
<span id="cb72-650"><a href="#cb72-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-651"><a href="#cb72-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=F}</span></span>
<span id="cb72-652"><a href="#cb72-652" aria-hidden="true" tabindex="-1"></a>mean_phase_d_abs <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(mean_phase_d_abs, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"IN"</span>,<span class="st">"OUT"</span>), </span>
<span id="cb72-653"><a href="#cb72-653" aria-hidden="true" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">"Gruppe"</span>, <span class="at">values_to =</span> <span class="st">"Durchschnitt"</span>)</span>
<span id="cb72-654"><a href="#cb72-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-655"><a href="#cb72-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-656"><a href="#cb72-656" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4c)</span></span>
<span id="cb72-657"><a href="#cb72-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-658"><a href="#cb72-658" aria-hidden="true" tabindex="-1"></a>Nun visualisieren wie die Verteilung der absoluten und der relativen Zahlen nach Phasen in einem Barplot.</span>
<span id="cb72-659"><a href="#cb72-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-660"><a href="#cb72-660" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Erstellt je einen Plot zu den absoluten und den relativen Zahlen nach den unterstehenden Vorgaben und speichert beide Plots im Environment:</span>
<span id="cb72-661"><a href="#cb72-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-662"><a href="#cb72-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=F}</span></span>
<span id="cb72-663"><a href="#cb72-663" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_abs, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-664"><a href="#cb72-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb72-665"><a href="#cb72-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb72-666"><a href="#cb72-666" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb72-667"><a href="#cb72-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [mean]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb72-668"><a href="#cb72-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-669"><a href="#cb72-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb72-670"><a href="#cb72-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-671"><a href="#cb72-671" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mean_phase_d_proz, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Gruppe, <span class="at">y =</span> Durchschnitt, <span class="at">fill =</span> Phase))<span class="sc">+</span></span>
<span id="cb72-672"><a href="#cb72-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb72-673"><a href="#cb72-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"royalblue"</span>, <span class="st">"red4"</span>, <span class="st">"orangered"</span>, <span class="st">"gold2"</span>), <span class="at">name =</span> <span class="st">"Phase"</span>)<span class="sc">+</span></span>
<span id="cb72-674"><a href="#cb72-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"IN"</span>, <span class="st">"OUT"</span>))<span class="sc">+</span></span>
<span id="cb72-675"><a href="#cb72-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Durchschnitt [%]"</span>, <span class="at">x=</span> <span class="st">"Bewegungsrichtung"</span>)<span class="sc">+</span></span>
<span id="cb72-676"><a href="#cb72-676" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">15</span>)<span class="sc">+</span></span>
<span id="cb72-677"><a href="#cb72-677" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb72-678"><a href="#cb72-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb72-679"><a href="#cb72-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-680"><a href="#cb72-680" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Arrangiert beide Plots nebeneinander und exportiert das Ergebnis (Arrangieren siehe 3c). </span>
<span id="cb72-681"><a href="#cb72-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-682"><a href="#cb72-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-685"><a href="#cb72-685" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb72-686"><a href="#cb72-686" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>